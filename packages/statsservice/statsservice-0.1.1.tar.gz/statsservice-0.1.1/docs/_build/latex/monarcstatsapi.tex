%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,10pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax

\PassOptionsToPackage{warn}{textcomp}
\usepackage[utf8]{inputenc}
\ifdefined\DeclareUnicodeCharacter
% support both utf8 and utf8x syntaxes
  \ifdefined\DeclareUnicodeCharacterAsOptional
    \def\sphinxDUC#1{\DeclareUnicodeCharacter{"#1}}
  \else
    \let\sphinxDUC\DeclareUnicodeCharacter
  \fi
  \sphinxDUC{00A0}{\nobreakspace}
  \sphinxDUC{2500}{\sphinxunichar{2500}}
  \sphinxDUC{2502}{\sphinxunichar{2502}}
  \sphinxDUC{2514}{\sphinxunichar{2514}}
  \sphinxDUC{251C}{\sphinxunichar{251C}}
  \sphinxDUC{2572}{\textbackslash}
\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}



\usepackage{times}
\expandafter\ifx\csname T@LGR\endcsname\relax
\else
% LGR was declared as font encoding
  \substitutefont{LGR}{\rmdefault}{cmr}
  \substitutefont{LGR}{\sfdefault}{cmss}
  \substitutefont{LGR}{\ttdefault}{cmtt}
\fi
\expandafter\ifx\csname T@X2\endcsname\relax
  \expandafter\ifx\csname T@T2A\endcsname\relax
  \else
  % T2A was declared as font encoding
    \substitutefont{T2A}{\rmdefault}{cmr}
    \substitutefont{T2A}{\sfdefault}{cmss}
    \substitutefont{T2A}{\ttdefault}{cmtt}
  \fi
\else
% X2 was declared as font encoding
  \substitutefont{X2}{\rmdefault}{cmr}
  \substitutefont{X2}{\sfdefault}{cmss}
  \substitutefont{X2}{\ttdefault}{cmtt}
\fi


\usepackage[Bjarne]{fncychap}
\usepackage{sphinx}

\fvset{fontsize=\small}
\usepackage{geometry}


% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}
\addto\captionsenglish{\renewcommand{\contentsname}{Contents:}}

\usepackage{sphinxmessages}
\setcounter{tocdepth}{1}



\title{MONARC Stats API}
\date{Apr 28, 2020}
\release{0.1.0}
\author{CÃ©dric Bonhomme \textless{}cedric@cedricbonhomme.org\textgreater{}}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{Release}
\makeindex
\begin{document}

\pagestyle{empty}
\sphinxmaketitle
\pagestyle{plain}
\sphinxtableofcontents
\pagestyle{normal}
\phantomsection\label{\detokenize{index::doc}}



\chapter{API v1}
\label{\detokenize{api-v1:api-v1}}\label{\detokenize{api-v1::doc}}
\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Get all organizations}
\PYGZdl{} curl http://127.0.0.1:5000/organization/
\PYG{o}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}data\PYGZdq{}}: \PYG{o}{[}\PYG{o}{]}, \PYG{l+s+s2}{\PYGZdq{}has\PYGZus{}more\PYGZdq{}}: false\PYG{o}{\PYGZcb{}}

\PYG{c+c1}{\PYGZsh{} Create an organization (let\PYGZsq{}s say with only a token for the moment \PYGZhy{} same token for the MONARC client/organization):}
\PYGZdl{} curl \PYGZhy{}H \PYG{l+s+s2}{\PYGZdq{}Content\PYGZhy{}Type: application/json\PYGZdq{}} \PYGZhy{}X POST \PYGZhy{}d \PYG{l+s+se}{\PYGZbs{}}
\PYG{l+s+s1}{\PYGZsq{}\PYGZob{}\PYGZdq{}token\PYGZdq{}: \PYGZdq{}UhdSAdTIoBT18r9Fa3W26iN9RRGlknkO62YkWY\PYGZhy{}yyqn3c\PYGZus{}6\PYGZhy{}hEfIDX0DkF8JvupxfEw\PYGZdq{}\PYGZcb{}\PYGZsq{}} http://127.0.0.1:5000/api/v1/organization/

\PYG{c+c1}{\PYGZsh{} List again the organizations:}
\PYGZdl{} curl http://127.0.0.1:5000/api/v1/organization/
\PYG{c+c1}{\PYGZsh{} Result:}
\PYG{o}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}data\PYGZdq{}}: \PYG{o}{[}\PYG{o}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}token\PYGZdq{}}: \PYG{l+s+s2}{\PYGZdq{}UhdSAdTIoBT18r9Fa3W26iN9RRGlknkO62YkWY\PYGZhy{}yyqn3c\PYGZus{}6\PYGZhy{}hEfIDX0DkF8JvupxfEw\PYGZdq{}}, \PYG{l+s+s2}{\PYGZdq{}id\PYGZdq{}}: \PYG{l+s+s2}{\PYGZdq{}5ea3717b0cdd5b63ad17b6ce\PYGZdq{}}\PYG{o}{\PYGZcb{}}\PYG{o}{]}, \PYG{l+s+s2}{\PYGZdq{}has\PYGZus{}more\PYGZdq{}}: false\PYG{o}{\PYGZcb{}}

\PYG{c+c1}{\PYGZsh{} Get all stats}
\PYGZdl{} curl \PYGZhy{}H \PYG{l+s+s2}{\PYGZdq{}AUTHORIZATION: basic \PYGZlt{}TOKEN\PYGZgt{}\PYGZdq{}} http://127.0.0.1:5000/api/v1/stats/
\PYG{o}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}data\PYGZdq{}}: \PYG{o}{[}\PYG{o}{]}, \PYG{l+s+s2}{\PYGZdq{}has\PYGZus{}more\PYGZdq{}}: false\PYG{o}{\PYGZcb{}}

\PYG{c+c1}{\PYGZsh{} Create a stat}
\PYG{c+c1}{\PYGZsh{} data is a DynamicField}
\PYG{c+c1}{\PYGZsh{} note that we are using the MongoDB id of the created org:}
\PYGZdl{} curl \PYGZhy{}H \PYG{l+s+s2}{\PYGZdq{}AUTHORIZATION: basic \PYGZlt{}TOKEN\PYGZgt{}\PYGZdq{}} \PYGZhy{}H \PYG{l+s+s2}{\PYGZdq{}Content\PYGZhy{}Type: application/json\PYGZdq{}} \PYGZhy{}X POST \PYGZhy{}d \PYG{l+s+se}{\PYGZbs{}}
\PYG{l+s+s1}{\PYGZsq{}\PYGZob{}\PYGZdq{}type\PYGZdq{}: \PYGZdq{}risk\PYGZdq{}, \PYGZdq{}organization\PYGZdq{}: \PYGZdq{}5ea3717b0cdd5b63ad17b6ce\PYGZdq{}, \PYGZdq{}data\PYGZdq{}: \PYGZob{}\PYGZdq{}what\PYGZdq{}: \PYGZdq{}you want\PYGZdq{}, \PYGZdq{}super\PYGZdq{}: \PYGZdq{}cool\PYGZdq{}\PYGZcb{}, \PYGZdq{}day\PYGZdq{}:1, \PYGZdq{}week\PYGZdq{}:1, \PYGZdq{}month\PYGZdq{}:1\PYGZcb{}\PYGZsq{}} http://127.0.0.1:5000/api/v1/stats/
\PYG{c+c1}{\PYGZsh{} Result:}
\PYG{o}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}organization\PYGZdq{}}: \PYG{l+s+s2}{\PYGZdq{}5ea3717b0cdd5b63ad17b6ce\PYGZdq{}}, \PYG{l+s+s2}{\PYGZdq{}type\PYGZdq{}}: \PYG{l+s+s2}{\PYGZdq{}risk\PYGZdq{}}, \PYG{l+s+s2}{\PYGZdq{}day\PYGZdq{}}: \PYG{l+m}{1}, \PYG{l+s+s2}{\PYGZdq{}week\PYGZdq{}}: \PYG{l+m}{1}, \PYG{l+s+s2}{\PYGZdq{}month\PYGZdq{}}: \PYG{l+m}{1}, \PYG{l+s+s2}{\PYGZdq{}data\PYGZdq{}}: \PYG{o}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}what\PYGZdq{}}: \PYG{l+s+s2}{\PYGZdq{}you want\PYGZdq{}}, \PYG{l+s+s2}{\PYGZdq{}super\PYGZdq{}}: \PYG{l+s+s2}{\PYGZdq{}cool\PYGZdq{}}\PYG{o}{\PYGZcb{}}, \PYG{l+s+s2}{\PYGZdq{}created\PYGZus{}at\PYGZdq{}}: \PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}04\PYGZhy{}24T23:38:26.326000\PYGZdq{}}, \PYG{l+s+s2}{\PYGZdq{}updated\PYGZus{}at\PYGZdq{}}: \PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}04\PYGZhy{}24T23:38:26.326000\PYGZdq{}}, \PYG{l+s+s2}{\PYGZdq{}id\PYGZdq{}}: \PYG{l+s+s2}{\PYGZdq{}5ea378728f826c539837436a\PYGZdq{}}\PYG{o}{\PYGZcb{}}


\PYG{c+c1}{\PYGZsh{} Get the last stat with the id returned previously:}
\PYGZdl{} curl \PYGZhy{}H \PYG{l+s+s2}{\PYGZdq{}AUTHORIZATION: basic \PYGZlt{}TOKEN\PYGZgt{}\PYGZdq{}} http://127.0.0.1:5000/api/v1/stats/5ea378728f826c539837436a/
\PYG{c+c1}{\PYGZsh{} Result:}
\PYG{o}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}organization\PYGZdq{}}: \PYG{l+s+s2}{\PYGZdq{}5ea3717b0cdd5b63ad17b6ce\PYGZdq{}}, \PYG{l+s+s2}{\PYGZdq{}type\PYGZdq{}}: \PYG{l+s+s2}{\PYGZdq{}risk\PYGZdq{}}, \PYG{l+s+s2}{\PYGZdq{}day\PYGZdq{}}: \PYG{l+m}{1}, \PYG{l+s+s2}{\PYGZdq{}week\PYGZdq{}}: \PYG{l+m}{1}, \PYG{l+s+s2}{\PYGZdq{}month\PYGZdq{}}: \PYG{l+m}{1}, \PYG{l+s+s2}{\PYGZdq{}data\PYGZdq{}}: \PYG{o}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}what\PYGZdq{}}: \PYG{l+s+s2}{\PYGZdq{}you want\PYGZdq{}}, \PYG{l+s+s2}{\PYGZdq{}super\PYGZdq{}}: \PYG{l+s+s2}{\PYGZdq{}cool\PYGZdq{}}\PYG{o}{\PYGZcb{}}, \PYG{l+s+s2}{\PYGZdq{}created\PYGZus{}at\PYGZdq{}}: \PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}04\PYGZhy{}24T23:38:26.326000\PYGZdq{}}, \PYG{l+s+s2}{\PYGZdq{}updated\PYGZus{}at\PYGZdq{}}: \PYG{l+s+s2}{\PYGZdq{}2020\PYGZhy{}04\PYGZhy{}24T23:38:26.326000\PYGZdq{}}, \PYG{l+s+s2}{\PYGZdq{}id\PYGZdq{}}: \PYG{l+s+s2}{\PYGZdq{}5ea378728f826c539837436a\PYGZdq{}}\PYG{o}{\PYGZcb{}}

\PYG{c+c1}{\PYGZsh{} Get stats for a specific organization:}
\PYGZdl{} curl \PYGZhy{}H \PYG{l+s+s2}{\PYGZdq{}AUTHORIZATION: basic UhdSAdTIoBT18r9Fa3W26iN9RRGlknkO62YkWY\PYGZhy{}yyqn3c\PYGZus{}6\PYGZhy{}hEfIDX0DkF8JvupxfEw\PYGZdq{}}  http://127.0.0.1:5000/api/v1/stats/?organization\PYGZus{}\PYGZus{}exact\PYG{o}{=}5ea3717b0cdd5b63ad17b6ce

\PYG{c+c1}{\PYGZsh{} You can also use pagination:}
\PYGZdl{} curl http://127.0.0.1:5000/api/v1/stats/?\PYGZus{}skip\PYG{o}{=}\PYG{l+m}{0}\PYG{p}{\PYGZam{}}\PYG{n+nv}{\PYGZus{}limit}\PYG{o}{=}\PYG{l+m}{10}
\end{sphinxVerbatim}


\chapter{Command Line Interface}
\label{\detokenize{command-line-interface:command-line-interface}}\label{\detokenize{command-line-interface::doc}}

\section{Pushing data}
\label{\detokenize{command-line-interface:pushing-data}}
Pushing data to another stats server.


\chapter{Indices and tables}
\label{\detokenize{index:indices-and-tables}}\begin{itemize}
\item {} 
\DUrole{xref,std,std-ref}{genindex}

\item {} 
\DUrole{xref,std,std-ref}{modindex}

\item {} 
\DUrole{xref,std,std-ref}{search}

\end{itemize}



\renewcommand{\indexname}{Index}
\printindex
\end{document}