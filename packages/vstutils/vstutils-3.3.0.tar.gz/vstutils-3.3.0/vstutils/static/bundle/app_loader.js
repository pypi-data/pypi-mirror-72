var app_loader=function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{enumerable:!0,get:d})},b.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},b.t=function(a,c){if(1&c&&(a=b(a)),8&c)return a;if(4&c&&"object"==typeof a&&a&&a.__esModule)return a;var d=Object.create(null);if(b.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:a}),2&c&&"string"!=typeof a)for(var f in a)b.d(d,f,function(b){return a[b]}.bind(null,f));return d},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="/static/bundle/",b(b.s=168)}({10:function(a){function b(c){return a.exports="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?b=function(a){return typeof a}:b=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},b(c)}a.exports=b},14:function(b,c,d){var f=d(65),g=d(66),h=d(42),i=d(67);b.exports=function(a,b){return f(a)||g(a,b)||h(a,b)||i()}},16:function(b,e,f){"use strict";function g(b){if("undefined"==typeof Symbol||null==b[Symbol.iterator]){if(Array.isArray(b)||(b=function(a,b){if(a){if("string"==typeof a)return c(a,b);var d=Object.prototype.toString.call(a).slice(8,-1);return"Object"===d&&a.constructor&&(d=a.constructor.name),"Map"===d||"Set"===d?Array.from(d):"Arguments"===d||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d)?c(a,b):void 0}}(b))){var d=0,e=function(){};return{s:e,n:function(){return d>=b.length?{done:!0}:{done:!1,value:b[d++]}},e:function(a){throw a},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,g,h=!0,i=!1;return{s:function(){f=b[Symbol.iterator]()},n:function(){var a=f.next();return h=a.done,a},e:function(a){i=!0,g=a},f:function(){try{h||null==f.return||f.return()}finally{if(i)throw g}}}}function c(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function d(a,b,c){var d=document.createElement(a);for(var e in b.forEach(function(a){d.setAttribute(a.key,a.value)}),c)if("object"===m()(c[e])&&"style"===e)for(var f in c[e])Object.prototype.hasOwnProperty.call(c[e],f)&&(d[e][f]=c[e][f]);else d[e]=c[e];return d}f.d(e,"a",function(){return l}),f.d(e,"b",function(){return d});var h=f(4),j=f.n(h),k=f(5),i=f.n(k),a=f(10),m=f.n(a),l=function(){function a(b){j()(this,a),this.resource_list=b}return i()(a,[{key:"appendFile_js",value:function(a,b){var c=d("script",[{key:"type",value:"text/javascript"},{key:"data-url",value:a.name}],{innerHTML:b});document.head.appendChild(c)}},{key:"appendFile_css",value:function(a,b){var c=d("style",[{key:"rel",value:"stylesheet"},{key:"type",value:"text/css"},{key:"media",value:"text/css"},{key:"data-url",value:a.name}],{rel:"stylesheet",type:"text/css",media:"all",innerHTML:b});document.head.appendChild(c)}},{key:"appendFile_tpl",value:function(a,b){var c=d("div",[],{innerHTML:b});document.body.appendChild(c)}},{key:"appendFilesSync",value:function(b,c,d){var e=this,f=this.resource_list[c],g="appendFile_"+f.type;return this[g]?b[c].text().then(function(h){return e[g](f,h),c+1===e.resource_list.length?(d&&d.allFilesAppended&&d.allFilesAppended(),Promise.resolve(!0)):(d&&d.fileAppended&&d.fileAppended(f,h,c),e.appendFilesSync(b,c+1,d))}):Promise.reject()}},{key:"checkAllFilesLoaded",value:function(a){var b,c=g(a);try{for(c.s();!(b=c.n()).done;){var d=b.value;if(200!==d.status)throw new Error("".concat(d.status," error occurred during file loading - \"").concat(d.url,"\""))}}catch(a){c.e(a)}finally{c.f()}return!0}},{key:"loadAllFiles",value:function(){return Promise.all(this.resource_list.map(function(a){return fetch(a.name)}))}}]),a}()},168:function(b,e,j){"use strict";function k(){l.deleteAllCache().finally(function(){"caches"in window&&window.caches.keys().then(function(a){a.forEach(function(a){window.caches.delete(a)})}),"serviceWorker"in navigator?navigator.serviceWorker.getRegistrations().then(function(a){0===a.length&&window.location.reload(!0);var b=a.map(function(a){return a.unregister()});Promise.all(b).finally(function(){window.location.reload(!0)})}):window.location.reload(!0)})}function n(){l.delFile("openapi").finally(function(){window.location.reload(!0)})}function f(){localStorage.gui_version=window.gui_version,localStorage.gui_user_version=window.gui_user_version}j.r(e);var m=j(14),o=j.n(m),p=j(4),i=j.n(p),a=j(5),q=j.n(a),l=new(function(){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};i()(this,a),this.indexed_db=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,this.db_name="cache_"+window.host_url.replace(/[^0-9A-z]/gim,"_")+"__",this.db_version=1,this.store_name="cache_store",Object.assign(this,b)}return q()(a,[{key:"connectDB",value:function(){var a=this;return this.connected=new Promise(function(b,c){var d=a.indexed_db.open(a.db_name,a.db_version);d.onerror=function(a){console.error("Error in FilesCache.connectDB().",a),c(a)},d.onsuccess=function(){var a=d.result;a.onerror=function(a){console.log("indexedDB - db.onerror ",a)},b(a)},d.onupgradeneeded=function(){return d.result.createObjectStore(a.store_name,{keyPath:"path",autoIncrement:!0}),a.connectDB().then(b,c)}}),this.connected}},{key:"getFile",value:function(a){var b=this;return new Promise(function(c,d){b.connected.then(function(e){var f=e.transaction([b.store_name],"readonly").objectStore(b.store_name).get(a);f.onerror=function(a){console.error("Error in FilesCache.getFile()",a),d(a)},f.onsuccess=function(){f.result||d(),c(f.result)}})})}},{key:"setFile",value:function(b,c){var d=this;return new Promise(function(a,f){d.connected.then(function(g){var h=g.transaction([d.store_name],"readwrite");h.onerror=function(a){console.error("Error in FilesCache.setFile().",a)};var i=h.objectStore(d.store_name).put({path:b,data:c});i.onerror=function(a){console.error("Error in FilesCache.setFile()",a),f(a)},i.onsuccess=function(){i.result||f(),a(i.result)}})})}},{key:"delFile",value:function(b){var c=this;return new Promise(function(a,d){c.connected.then(function(e){var f=e.transaction([c.store_name],"readwrite");f.onerror=function(a){console.error("Error in FilesCache.delFile()",a)};var g=f.objectStore(c.store_name).delete(b);g.onerror=function(a){console.error("Error in FilesCache.detFile()",a),d(a)},g.onsuccess=function(){a(!0)}})})}},{key:"deleteAllCache",value:function(){var a=this;return new Promise(function(b,c){a.connected.then(function(d){d.close();var e=a.indexed_db.deleteDatabase(a.db_name);e.onerror=function(a){console.error("Error during 'deleteAllCache' method execution. ",a),c(a)},e.onblocked=function(a){b(a)},e.onsuccess=function(a){b(a)}})})}}]),a}());l.connectDB();var c=j(16),d=function(){function a(){i()(this,a),this.loading=!1,this.errors=[]}return q()(a,[{key:"addLoaderBlockToPage",value:function(){var b=Object(c.b)("div",[],{id:"LoadingProgressBar"}),d=Object(c.b)("h1",[],{className:"titleP",innerText:window.project_gui_name}),e=Object(c.b)("div",[],{className:"operation"});e.appendChild(Object(c.b)("div",[],{id:"LoadingProgressBarOperation",className:"statusCont",innerText:"loading files"}));var f=Object(c.b)("div",[],{className:"status"});f.appendChild(Object(c.b)("div",[],{id:"LoadingProgressBarCount",className:"statusCont"}));var g=Object(c.b)("div",[],{className:"loadWrapper"});g.appendChild(Object(c.b)("div",[],{id:"LoadingProgressBarLine",className:"loadProgress"})),b.appendChild(Object(c.b)("style",[],{innerHTML:"#LoadingProgressBar ::-webkit-scrollbar{width:0}#LoadingProgressBar{background:#ecf0f5;width:100%;height:100%;position:fixed;top:0;left:0;z-index:2000}#LoadingProgressBar .loadWrapper{width:200px;height:7px;position:absolute;top:155px;left:50%;transform:translate(-50%,-50%);background:#e0e0e0;border-radius:7px}#LoadingProgressBar .loadProgress{position:absolute;top:0;left:0;border-radius:7px;background:#3f51b5;height:100%;transition:all .1s ease-out}#LoadingProgressBar .operation,#LoadingProgressBar .status,#LoadingProgressBar .titleP,.LoadingProgressBar-logger-wrapper,.loadInfoWrapper a{position:absolute;left:50%;font-family:'Ubuntu Mono',monospace}#LoadingProgressBar .operation,#LoadingProgressBar .status{transform:translate(-50%,-45%);color:#607d8b}#LoadingProgressBar .operation{top:110px}#LoadingProgressBar .status{top:135px}#LoadingProgressBar .statusCont{font-family:'Ubuntu Mono',monospace}#LoadingProgressBar .titleP{top:30px;transform:translate(-50%,25%);color:#3f51b5;text-transform:uppercase;font-size:30px;margin-top:20px;margin-bottom:10px;font-weight:500;line-height:1.1;margin:.67em 0;box-sizing:border-box}.loadInfoWrapper a{border-radius:7px;padding:5px 15px;background-color:#e0e0e0;top:160px;transform:translate(-50%,25%);color:#3f51b5;text-transform:uppercase;text-decoration:none;box-sizing:border-box;font-weight:400;font-size:14px}.loadInfoWrapper a:hover{background-color:#d0d0d0}@media (max-width:360px){.loadInfoWrapper a{padding:7px 10px}}.LoadingProgressBar-logger-wrapper{top:230px;transform:translate(-50%,0);font-size:12px;font-weight:500;line-height:1.1;box-sizing:border-box;padding:0;margin:0 auto;width:90vw;height:calc(100vh - 256px);background-color:#dedede;overflow:scroll}.LoadingProgressBar-logger-wrapper h3{font-size:18px}.LoadingProgressBar-logger-wrapper h4{font-size:16px}.LoadingProgressBar-logger-wrapper h5{font-size:14px}.LoadingProgressBar-error{margin:0;padding:10px 0;color:#b53f3f;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}.LoadingProgressBar-success{margin:0;padding:0;color:green;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}.LoadingProgressBar-error-msg{color:#b53f3f}.loadInfoWrapper.need-reload span{animation-name:blinker;animation-iteration-count:infinite;animation-timing-function:cubic-bezier(1,-.75,0,2.08);animation-duration:1s;color:red;font-weight:700}@keyframes blinker{from{opacity:1}to{opacity:.3}}#loading_logs_table th{text-align:left}#loading_logs_table td{padding-left:10px}"})),b.appendChild(d),b.appendChild(e),b.appendChild(f),b.appendChild(g);var h=Object(c.b)("div",[],{className:"loadInfoWrapper"}),i=Object(c.b)("a",[],{href:"#",onclick:function(){return window.cleanAllCacheAndReloadPage(),!1}});i.appendChild(Object(c.b)("span",[],{innerText:"Reload all cache"})),h.appendChild(i),b.appendChild(h),b.appendChild(this.formLogsWrapper()),document.body.appendChild(b)}},{key:"formLogsWrapper",value:function(){var a=Object(c.b)("div",[],{className:"LoadingProgressBar-logger-wrapper",style:{display:"none"}});return a.appendChild(Object(c.b)("h3",[],{innerText:"Loading logger",style:{textAlign:"center"}})),a.appendChild(Object(c.b)("h4",[],{className:"LoadingProgressBar-error-msg",innerText:"Some errors occurred during app loading",style:{textAlign:"center",display:"none"}})),a.appendChild(Object(c.b)("h5",[],{innerText:"Project info"})),a.appendChild(this.formProjectInfoTable()),a.appendChild(Object(c.b)("h5",[],{innerText:"Logs"})),a}},{key:"formProjectInfoTable",value:function(){for(var a=[{title:"Project name",value:window.project_gui_name},{title:"Project Version",value:window.project_version},{title:"Gui Version",value:window.gui_version},{title:"Host URL",value:window.host_url},{title:"Debug mode",value:window.isDebug}],b=Object(c.b)("table",[],{id:"loading_logs_table"}),d=0;d<a.length;d++){var e=a[d],f=Object(c.b)("tr",[],{});f.appendChild(Object(c.b)("th",[],{innerText:e.title})),f.appendChild(Object(c.b)("td",[],{innerText:e.value})),b.appendChild(f)}return b}},{key:"setLoadingOperation",value:function(a){var b=document.getElementById("LoadingProgressBarOperation");b&&(b.innerText=a)}},{key:"showLoadingAnimation",value:function(){var a=this,b=document.getElementById("LoadingProgressBarCount");b&&(3===b.innerText.length&&(b.innerText=""),b.innerText+=".",setTimeout(function(){a.loading&&a.showLoadingAnimation()},800))}},{key:"setLoadingProgress",value:function(a){var b=document.getElementById("LoadingProgressBarLine");if(b){var c=Math.ceil(a)+"%";b.style.width=c,(b=document.getElementById("LoadingProgressBarCount"))&&(b.style.width=c,b.innerHTML=c)}}},{key:"hideLoaderBlock",value:function(){document.querySelector("#RealBody").style.display="block",function(a){a.style.opacity||(a.style.opacity=1);var b=setInterval(function(){0<a.style.opacity?a.style.opacity-=.05:(a.style.display="none",clearInterval(b),setTimeout(function(){document.body.removeChild(a)},1e3))},30)}(document.querySelector("#LoadingProgressBar"))}},{key:"appendLog",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;try{var d="";b||(b={type:"Log",name:""}),d+="Type:"+b.type+"\t",b.name&&(d+="Name:"+b.name+"\t"),d+="string"==typeof a?a:"JSON:"+JSON.stringify(a);var f=Object(c.b)("pre",[],{className:"LoadingProgressBar-success",innerText:d});document.querySelector(".LoadingProgressBar-logger-wrapper").appendChild(f)}catch(a){this.appendError(a)}}},{key:"appendError",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;this.errors.push(a);try{console.error(a);var d="";b||(b={type:"Error",name:""}),d+="Type:"+b.type+"\t",b.name&&(d+="Name:"+b.name+"\n"),d+=a&&a.message?a.message+"\nstack:\n"+a.stack:"JSON exeption:\n"+JSON.stringify(a);var e=Object(c.b)("pre",[],{className:"LoadingProgressBar-error",innerText:d}),f=document.querySelector(".LoadingProgressBar-logger-wrapper");f.appendChild(e),f.style.display="block",document.querySelector(".LoadingProgressBar-error-msg").style.display="block",document.querySelector(".loadInfoWrapper").classList.add("need-reload")}catch(a){console.error(a),alert("Oops, some error occurred! Check out DevTools console!")}}},{key:"showUpdatingAppVersionMessage",value:function(){this.loading=!0,this.addLoaderBlockToPage(),this.setLoadingOperation("updating app version"),this.showLoadingAnimation()}},{key:"loadAndAppendDependencies",value:function(a){var b=this;return this.loading=!0,this.addLoaderBlockToPage(),this.setLoadingOperation("loading files"),this.showLoadingAnimation(),a.loadAllFiles().then(function(c){return b.loading=!1,b.setLoadingOperation("loading app"),b.appendDependencies(c,a)}).catch(function(a){throw b.loading=!1,b.appendError(a),a})}},{key:"appendDependencies",value:function(a,b){var c=this;if(!b.checkAllFilesLoaded(a))return null;this.appendLog("All static files were successfully loaded");return b.appendFilesSync(a,0,{fileAppended:function(b,d,e){c.appendLog("File was appended to the page - \""+b.name+"\"");var f=Math.floor(100*((e+1)/a.length));c.setLoadingProgress(f)},allFilesAppended:function(){c.appendLog("All static files were successfully appended to the page."),c.setLoadingProgress(100)}}).then(function(){if(c.errors.length)throw new Error("Some error occurred during files loading.");spa.signals.emit("resource.loaded")})}}]),a}(),r=function(){function a(b){i()(this,a),this.cache=b}return q()(a,[{key:"loadSchemaFromApi",value:function(){return fetch(window.endpoint_url+"?format=openapi").then(function(a){if(!a.ok)throw new Error("API request for loading of OpenAPI schema failed.");return a.json()}).then(function(a){return a})}},{key:"loadSchemaFromCache",value:function(){var a=this;return this.cache.getFile("openapi").then(function(a){return JSON.parse(a.data)}).catch(function(){return a.loadSchemaFromApi().then(function(b){return a.cache.setFile("openapi",JSON.stringify(b)),b})})}},{key:"loadSchema",value:function(){return this[this.cache?"loadSchemaFromCache":"loadSchemaFromApi"]().then(function(a){return a}).catch(function(a){throw console.error("Some error occurred during attempt of getting of OpenAPI schema."),a})}}]),a}();window.cleanAllCacheAndReloadPage=k,window.cleanOpenApiCacheAndReloadPage=n;var g=new r(l).loadSchema();!("serviceWorker"in navigator)||localStorage.gui_version&&localStorage.gui_version!==window.gui_version||navigator.serviceWorker.register("/service-worker.js").then(function(a){a.update()}).catch(function(a){console.error("Service Worker registration failed with "+a)});var h=new d,s=function(a){return h.appendError(a.error)};window.addEventListener("error",s),l.connected.then(function(){if(void 0!==localStorage.gui_version&&localStorage.gui_version!==window.gui_version)return f(),h.showUpdatingAppVersionMessage(),void k();if(void 0!==localStorage.gui_user_version&&localStorage.gui_user_version!==window.gui_user_version)return f(),h.showUpdatingAppVersionMessage(),void n();f();var a=function(){if(window.resourceList)return Promise.resolve(window.resourceList)}().then(function(a){return new c.a(a)}).then(function(a){return h.loadAndAppendDependencies(a)});Promise.all([g,a]).then(function(a){var b=o()(a,2),c=b[0];b[1],window.spa.signals.emit("openapi.loaded",c),window.app=new window.App(c,l),window.app.start().then(function(){window.spa.signals.connect("app.version.updated",function(){alert("Oops! It looks like version of current page has become outdated. Please, reload the page.")}),window.addEventListener("storage",function(){window.gui_version!==localStorage.getItem("gui_version")&&window.spa.signals.emit("app.version.updated")}),window.removeEventListener("error",s),h.hideLoaderBlock()}).catch(function(a){h.appendError(a)})})})},4:function(a){a.exports=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}},42:function(a,b,c){var d=c(43);a.exports=function(a,b){if(a){if("string"==typeof a)return d(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(c):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?d(a,b):void 0}}},43:function(a){a.exports=function(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}},5:function(a){function b(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}a.exports=function(a,c,d){return c&&b(a.prototype,c),d&&b(a,d),a}},65:function(a){a.exports=function(a){if(Array.isArray(a))return a}},66:function(a){a.exports=function(b,c){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(b)){var d,e=[],f=!0,g=!1;try{for(var h,a=b[Symbol.iterator]();!(f=(h=a.next()).done)&&(e.push(h.value),!c||e.length!==c);f=!0);}catch(a){g=!0,d=a}finally{try{f||null==a.return||a.return()}finally{if(g)throw d}}return e}}},67:function(a){a.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}}});