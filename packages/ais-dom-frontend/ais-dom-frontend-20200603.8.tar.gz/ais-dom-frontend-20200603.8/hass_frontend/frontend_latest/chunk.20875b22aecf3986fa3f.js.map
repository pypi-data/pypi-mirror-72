{"version":3,"file":"chunk.20875b22aecf3986fa3f.js","sources":["webpack:///./src/panels/lovelace/cards/hui-ais-list-card.js"],"sourcesContent":["class ListCard extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: \"open\" });\n  }\n\n  setConfig(config) {\n    if (!config.entity) {\n      throw new Error(\"Please define an entity\");\n    }\n\n    const root = this.shadowRoot;\n    if (root.lastChild) root.removeChild(root.lastChild);\n\n    const cardConfig = config;\n    const card = document.createElement(\"ha-card\");\n    const content = document.createElement(\"div\");\n    const style = document.createElement(\"style\");\n    const iconColor = cardConfig.icon_color || \"white\";\n    const delIconHide =\n      cardConfig.show_delete_icon === true ? \"\" : \"display:none;\";\n    const flagColor = \"var(--primary-color)\";\n    const accent = \"var(--paper-card-background-color)\";\n    const accentSelected = \"var(--primary-color)\";\n    style.textContent = `\n        .fanart_view {\n          width:100%;\n          overflow:hidden;\n          margin-left: auto;\n          margin-right: auto;\n          margin-bottom: 5px;\n          background-repeat:no-repeat;\n          background-size:auto 100%;\n          position:relative;\n        }\n        .fanart_svg_view {\n          overflow:visible;\n          width:55%;\n          margin-top:1%;\n          margin-left:2.5%;\n          alignment-baseline:text-after-edge;\n        }\n        .fanart_fan_view {\n          width:100%;\n          background:linear-gradient(to right, ${accent} 48%,\n          transparent 70%,${accent} 100%);\n          margin:auto;\n        }\n        .fanart_fan_view_selected {\n          width:100%;\n          background:linear-gradient(to right, ${accentSelected} 48%,\n          transparent 70%,${accentSelected} 100%);\n          margin:auto;\n        }\n        .fanart_flag_view {\n          z-index: 1;\n          height: 100%;\n          width: 100%;\n          position: absolute;\n          margin-top: 1px;\n          margin-right: 1px;\n          right: 0;\n          fill:${flagColor};\n        }\n        .fanart_flag_view svg{\n          float:right;\n          width: 90%;\n          height: 100%;\n          margin:0;\n          filter: drop-shadow( -1px 1px 1px rgba(0,0,0,.5));\n          cursor: pointer;\n        }\n        div.delete {\n          width: 20px;\n          height: 20px;\n          position: fixed;\n          padding-left: 4px;\n          z-index: 99999;\n        }\n        div.delete {\n          ${delIconHide};\n          cursor: pointer;\n          width: 12px;\n        }\n        div.delete:hover svg{\n          color: red;\n        }\n        div#container{\n          background: var(--primary-background-color);\n        }\n\n        .fanart_view ha-icon {\n          top: 5px;\n          right: 5px;\n          z-index: 2;\n          position:absolute;\n          filter: drop-shadow( 0px 0px 1px rgba(0,0,0,1));\n        }\n      `;\n\n    content.id = \"container\";\n    card.header = cardConfig.title;\n    card.appendChild(content);\n    card.appendChild(style);\n    root.appendChild(card);\n    this._config = cardConfig;\n  }\n\n  set hass(hass) {\n    const config = this._config;\n    const root = this.shadowRoot;\n    const selectedId = hass.states[config.entity].state;\n    if (hass.states[config.entity]) {\n      const feed = hass.states[config.entity].attributes;\n      this.style.display = \"block\";\n      const rowLimit = config.row_limit\n        ? config.row_limit\n        : Object.keys(feed).length;\n      let rows = 0;\n      const mediaSource = config.media_source;\n\n      if (feed !== undefined && Object.keys(feed).length > 0) {\n        let cardContent = \"\";\n        for (const entry in feed) {\n          if (entry in feed) {\n            if (rows >= rowLimit) break;\n            const mediaSourceInfo = feed[entry].audio_type || mediaSource;\n            let selectedClass = \"\";\n            if (Number(selectedId) === rows) {\n              selectedClass = \"_selected\";\n            }\n            cardContent +=\n              `\n            <div class=\"fanart_view playItem\"\n              style=\"margin-top: 0px; background-size: 54% auto;background-position:100% 35%; background-image:url(\n                ${feed[entry].thumbnail}\n              )\">\n              <div class=\"fanart_fan_view` +\n              selectedClass +\n              `\"> <ha-icon icon=\"${feed[entry].icon}\"></ha-icon> \n                  <div class=\"fanart_flag_view\">\n                    <svg class=\"play\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\" data-id=\"${rows}\" data-media-source=\"${mediaSource}\">\n                    </svg>\n                  </div>\n                  <div class=\"delete\" data-id=\"${rows}\" data-media-source=\"${mediaSource}\" style=\"cursor: pointer; \">\n                    <svg style=\"width:12px;height:12px\" viewBox=\"0 0 24 24\">\n                        <path fill=\"currentColor\" d=\"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z\" />\n                    </svg>                  \n                  </div> \n                  \n                  <svg class=\"fanart_svg_view\" viewBox=\"0 -20 200 100\">\n                    <foreignObject width=\"200\" height=\"80\" requiredFeatures=\"http://www.w3.org/TR/SVG11/feature#Extensibility\">\n                        <span xmlns=\"http://www.w3.org/1999/xhtml\"> ${feed[entry].title}</span>\n                    </foreignObject>\n                    <foreignObject width=\"200\" height=\"80\" requiredFeatures=\"http://www.w3.org/TR/SVG11/feature#Extensibility\">\n                        <div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"font-size:xx-small; bottom: 5px; position: absolute;\">\n                         <span>${mediaSourceInfo}</span>\n                        </div>\n                    </foreignObject>\n                  </svg>\n              </div>\n            </div>\n          `;\n            ++rows;\n          }\n        }\n\n        root.lastChild.hass = hass;\n        root.getElementById(\"container\").innerHTML = cardContent;\n      } else {\n        this.style.display = \"none\";\n      }\n    } else {\n      this.style.display = \"none\";\n    }\n    //\n    const playTracks = root.querySelectorAll(\".play\");\n    const delTracks = root.querySelectorAll(\"div.delete\");\n    playTracks.forEach((track) => {\n      track.addEventListener(\"click\", () => {\n        hass.callService(\"ais_cloud\", \"play_audio\", {\n          id: track.getAttribute(\"data-id\"),\n          media_source: track.getAttribute(\"data-media-source\"),\n        });\n        // track.classList.add(\"clicked\");\n      });\n    });\n\n    delTracks.forEach((track) => {\n      track.addEventListener(\"click\", () => {\n        hass.callService(\"ais_cloud\", \"delete_audio\", {\n          id: track.getAttribute(\"data-id\"),\n          media_source: track.getAttribute(\"data-media-source\"),\n        });\n      });\n    });\n  }\n\n  getCardSize() {\n    return 1;\n  }\n}\n\ncustomElements.define(\"hui-ais-list-card\", ListCard);\n"],"mappings":"AA2MA","sourceRoot":""}