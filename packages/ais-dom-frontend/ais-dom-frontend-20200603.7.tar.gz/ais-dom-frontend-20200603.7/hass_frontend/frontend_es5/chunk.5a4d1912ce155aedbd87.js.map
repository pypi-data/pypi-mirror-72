{"version":3,"file":"chunk.5a4d1912ce155aedbd87.js","sources":["webpack:///./src/panels/lovelace/cards/hui-ais-light-card.js"],"sourcesContent":["import { fireEvent } from \"../../../common/dom/fire_event\";\n\nclass ColorLite extends HTMLElement {\n  set hass(hass) {\n    if (!this.content) {\n      const card = document.createElement(\"ha-card\");\n      this.content = document.createElement(\"div\");\n      card.appendChild(this.content);\n      card.style =\n        \"background:none; width: 110px; border-radius: 52.5px; cursor: pointer;\";\n      this.appendChild(card);\n      this.addEventListener(\"click\", function() {\n        this._onClick(hass);\n      });\n      this.addEventListener(\"dblclick\", function() {\n        this._onDbClick();\n      });\n    }\n\n    const entityId = this.config.entity;\n    const entityClass =\n      this.config.class || this.config.entity.replace(\".\", \"_\");\n    this.setAttribute(\"class\", entityClass);\n    const state = hass.states[entityId];\n    const imageOn =\n      this.config.image_on || \"/static/ais_dom/design_tool/light_on.png\";\n    const imageOff =\n      this.config.image_off || \"/static/ais_dom/design_tool/light_off.png\";\n    //  if the light is on\n    if (state) {\n      if (state.state === \"on\") {\n        var rgbval = state.attributes.rgb_color;\n        var hsval = state.attributes.hs_color;\n        var hsar = \"\";\n        if (hsval) {\n          if (rgbval !== \"255,255,255\") {\n            hsar = \" hue-rotate(\" + hsval[0] + \"deg)\";\n          }\n        }\n        var bbritef = state.attributes.brightness;\n        var bbrite = bbritef / 205;\n\n        this.content.innerHTML = `<img src=\"${imageOn}\" style=\"position: absolute; filter: opacity(${bbrite}) ${hsar}!important;\">`;\n        // this.content.innerHTML = `<img src=\"${imageOn}\"  class=\"${entityClass}\" style=\"position: absolute;\">`;\n      } else {\n        this.content.innerHTML = `<img src=\"${imageOff}\" class=\"${entityClass}\"  style=\"position: absolute;\">`;\n      }\n    } else {\n      this.content.innerHTML = `<img src=\"${imageOff}\" class=\"${entityClass}\" style=\"position: absolute;\">`;\n    }\n  }\n\n  _onClick(hass) {\n    const onTap = this.config.tap_action || \"toggle\";\n    hass.callService(\"light\", onTap, {\n      entity_id: this.config.entity,\n    });\n  }\n\n  _onDbClick() {\n    fireEvent(this, \"hass-more-info\", {\n      entityId: this.config.entity,\n    });\n  }\n\n  ready() {\n    super.ready();\n  }\n\n  setConfig(config) {\n    if (!config.entity) {\n      throw new Error(\"You need to define an entity\");\n    }\n    this.config = config;\n  }\n\n  getCardSize() {\n    return 3;\n  }\n}\n\ncustomElements.define(\"hui-ais-light-card\", ColorLite);\n"],"mappings":"AAEA","sourceRoot":""}