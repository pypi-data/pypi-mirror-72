{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "headers.json",
    "definitions": {
        "standard_header": {
            "type": "object",
            "properties": {
                "app_message_uuid": {
                    "type": "string",
                    "description": "The application-generated (i.e. the application that provides a service) uuid for this message. To be provided by vendors"
                },
                "request_message_uuid": {
                    "type": "string",
                    "description": "If this message is created in response to a previous message, this is pub/sub the messageId of that previous message. All messages should have this field populated except for ServiceRequests"
                },
                "originating_message_uuid": {
                    "type": "string",
                    "description": "The pub/sub messageId of the first message that initiated the message discourse of which this message is a part. To be copied from one message to the next"
                },
                "service_chain_uuid": {
                    "type": "string",
                    "description": "A UBL generated uuid of the service-chain to which the subject of this message is a part. To be copied from one message to the next"
                },
                "message_timestamp": {
                    "type": "string",
                    "description": "The time and date when this message was created. Distinct from pub/sub's own publishTime attribute. To be provided by each service on message creation"
                },
                "user_token": {
                    "type": "string",
                    "description": "A UBL generated token containing details of the user and requested service. To be copied from one message to another"
                },
                "user_id": {
                    "type": "string",
                    "description": "An ID attributable to a user that has made a specific request. In this implementation this is the user's Azure AD user object ID. Provided by the UBL, to be copied from one message to another"
                },
                "service_chain": {
                    "type": "string",
                    "description": "A UBL generated sequence of subsequence service executions used to chain services together. To be copied from one message to another"
                }
            }
        },
        "service_provider_header": {
            "type": "object",
            "properties": {
                "service_provider_uuid": {
                    "type": "string",
                    "description": "The uuid of the service provider the request is made to. To be provided by vendors"
                },
                "service_offer_uuid": {
                    "type": "string",
                    "description": "The uuid of the service offer requested to be executed"
                },
                "service_request_uuid": {
                    "type": "string",
                    "description": "The uuid of the original service request that resulted in a service offer that this request is asking be executed."
                },
                "service_provider_signature": {
                    "type": "string",
                    "description": "Signed token provided by the service provider to validate the originator of this message. To be provided and validated by vendors"
                }
            }
        },
        "vendor": {
            "type": "object",
            "properties": {
                "service_provider_name": {
                    "type": "string",
                    "description": "The name of the service provider the request is made to. To be provided by vendors"
                },
                "service_provider_uuid": {
                    "type": "string",
                    "description": "The uuid of the service provider the request is made to. To be provided by vendors"
                },
                "service_provider_signature": {
                    "type": "string",
                    "description": "Signed token provided by the service provider to validate the originator of this message. To be provided and validated by vendors"
                }
            }
        },
        "dataset_type_component": {
            "type": "string",
            "description": "A list of accepted data types. Will be expanded as additional data types are supported",
            "enum": [
                "UNKNOWN",
                "SEGY",
                ""
            ]
        },
        "dataset_details_input_component": {
            "type": "object",
            "details": "A component detailing the input data requested for a particular service",
            "properties": {
                "data_token": {
                    "type": "string",
                    "description": "A DAS generated token to be redeemed for either metadata or a redirect to the location of data"
                },
                "dataset_uuid": {
                    "type": "string",
                    "description": "The uuid of the dataset requested to be processed"
                },
                "dataset_type": {
                    "$ref": "headers.json#/definitions/dataset_type_component"
                },
                "cdf_metadata": {
                    "type": ["string", "null"],
                    "description": "metadata from CDF"
                }
            }
        },
        "dataset_details_output_component": {
            "type": "object",
            "description": "The details of the output data requested of a service",
            "properties": {
                "file_uri": {
                    "type": "string",
                    "description": "The UBL-provided uri of the output data requested of a service"
                },
                "dataset_uuid": {
                    "type": "string",
                    "description": "The uuid of the output dataset requested to be processed"
                },
                "dataset_type": {
                    "$ref": "headers.json#/definitions/dataset_type_component"
                }
            }
        },
        "execution_details_component": {
            "exec_request_uuid": {
                "type": "string",
                "description": "The uuid of the execution request that this messages acknowledges"
            },
            "exec_process_uuid": {
                "type": "string",
                "description": "The uuid of the job / process / task actually carrying out the processing"
            }
        },
        "status_code_component": {
            "type": "string",
            "description": "A standard set of codes provided in the course of service processing",
            "enum": [
                "NOTIFICATION",
                "WARNING",
                "ERROR",
                "BREACH",
                "RETURN"
            ]
        },
        "service": {
            "catalogue_uuid": {
                "type": "string",
                "description": "A uuid of the  offered service. Provided by vendors"
            },
            "description": {
                "type": "string",
                "description": "A user-friendly description of the offered service. Provided by vendors"
            },
            "parameters": {
                "type": "string",
                "description": "The set of parameters required for a specific service in JSON Schema format (http://json-schema.org/draft-07/schema). Provided by vendors"
            },
            "name": {
                "type": "string",
                "description": "A user-friendly specific name of the offered service. Provided by vendors"
            }
        },
        "dataset": {
            "input": {
                "type": "string",
                "description": "A list of accepted data types. Will be expanded as additional data types are supported",
                "enum": [
                    "UNKNOWN",
                    "SEGY"
                ]
            },
            "output": {
                "type": "string",
                "description": "A list of data types. Will be expanded as additional data types are supported",
                "enum": [
                    "UNKNOWN",
                    "SEGY"
                ]
            }
        },
        "icon": {
            "base64": {
                "type": "string",
                "description": "base64 for service icon "
            },
            "url": {
                "type": "string",
                "description": "url for service icon"
            }
        }
    }
}
