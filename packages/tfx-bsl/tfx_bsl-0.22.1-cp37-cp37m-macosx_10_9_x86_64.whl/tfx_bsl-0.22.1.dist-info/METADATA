Metadata-Version: 2.1
Name: tfx-bsl
Version: 0.22.1
Summary: tfx_bsl (TFX Basic Shared Libraries) contains libraries shared by many TFX (TensorFlow eXtended) libraries and components.
Home-page: https://www.tensorflow.org/tfx
Author: Google LLC
Author-email: tensorflow-extended-dev@googlegroups.com
License: Apache 2.0
Download-URL: https://github.com/tensorflow/tfx-bsl/tags
Keywords: tfx bsl
Platform: UNKNOWN
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: Intended Audience :: Education
Classifier: Intended Audience :: Science/Research
Classifier: License :: OSI Approved :: Apache Software License
Classifier: Operating System :: MacOS :: MacOS X
Classifier: Operating System :: Microsoft :: Windows
Classifier: Operating System :: POSIX :: Linux
Classifier: Programming Language :: Python
Classifier: Programming Language :: Python :: 2
Classifier: Programming Language :: Python :: 2.7
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.5
Classifier: Programming Language :: Python :: 3.6
Classifier: Programming Language :: Python :: 3.7
Classifier: Topic :: Scientific/Engineering
Classifier: Topic :: Scientific/Engineering :: Artificial Intelligence
Classifier: Topic :: Scientific/Engineering :: Mathematics
Classifier: Topic :: Software Development
Classifier: Topic :: Software Development :: Libraries
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Requires-Python: >=2.7,!=3.0.*,!=3.1.*,!=3.2.*,!=3.3.*,!=3.4.*,<4
Description-Content-Type: text/markdown
Requires-Dist: absl-py (<0.9,>=0.7)
Requires-Dist: apache-beam[gcp] (<3,>=2.20)
Requires-Dist: google-api-python-client (<2,>=1.7.11)
Requires-Dist: numpy (<2,>=1.16)
Requires-Dist: pandas (<2,>=0.24)
Requires-Dist: protobuf (<4,>=3.7)
Requires-Dist: six (<2,>=1.12)
Requires-Dist: tensorflow (!=2.0.*,<3,>=1.15)
Requires-Dist: tensorflow-metadata (<0.23,>=0.22.2)
Requires-Dist: tensorflow-serving-api (<3,>=1.15)
Requires-Dist: pyarrow (<0.17,>=0.16.0)
Requires-Dist: avro-python3 (!=1.9.2.*,<2.0.0,>=1.8.1) ; python_version == "3.5" and platform_system == "Darwin"

# TFX Basic Shared Libraries

[![Python](https://img.shields.io/pypi/pyversions/tfx-bsl.svg?style=plastic)](https://github.com/tensorflow/tfx-bsl)
[![PyPI](https://badge.fury.io/py/tfx-bsl.svg)](https://badge.fury.io/py/tfx-bsl)

TFX Basic Shared Libraries (`tfx_bsl`) contains libraries shared by many
[TensorFlow eXtended (TFX)](https://www.tensorflow.org/tfx) components.

Only APIs in tfx_bsl/public are intended for direct use by TFX users.
APIs under other directories should be considered internal to TFX
(and therefore there is no backward or forward compatibility guarantee for
them).

Each minor version of a TFX component or TFX itself, if it needs to
depend on `tfx_bsl`, will depend on a specific minor version of it (e.g.
`tensorflow_data_validation` 0.14.\* will depend on and only work with `tfx_bsl`
0.14.\*)

## Installing from PyPI

`tfx_bsl` is available as a [PyPI package](https://pypi.org/project/tfx-bsl/).

```bash
pip install tfx-bsl
```

However it is a dependency of many TFX components and usually as a user you
don't need to install it directly.

## Build with Docker

If you want to build a TFX component from the master branch, past the latest
release, you may also have to build the latest `tfx_bsl`, as that TFX component
might have depended on new features introduced past the latest `tfx_bsl`
release.

Building from Docker is the recommended way to build `tfx_bsl` under Linux,
and is continuously tested at Google.

### 1. Install Docker

Please first install [`docker`](https://docs.docker.com/install/) and
[`docker-compose`](https://docs.docker.com/compose/install/) by following the
directions.

### 2. Clone the `tfx_bsl` repository

```shell
git clone https://github.com/tensorflow/tfx-bsl
cd tfx-bsl
```

Note that these instructions will install the latest master branch of `tfx-bsl`.
If you want to install a specific branch (such as a release branch), pass
`-b <branchname>` to the `git clone` command.

When building on Python 2, make sure to strip the Python types in the source
code using the following commands:

```shell
pip install strip-hints
python tfx_bsl/tools/strip_type_hints.py tfx_bsl/
```

### 3. Build the pip package

Then, run the following at the project root:

```bash
sudo docker-compose build manylinux2010
sudo docker-compose run -e PYTHON_VERSION=${PYTHON_VERSION} manylinux2010
```
where `PYTHON_VERSION` is one of `{27, 35, 36, 37}`.

A wheel will be produced under `dist/`.

### 4. Install the pip package

```shell
pip install dist/*.whl
```

## Build from source

### 1. Prerequisites

#### Install NumPy

If NumPy is not installed on your system, install it now by following [these
directions](https://www.scipy.org/scipylib/download.html).

#### Install Bazel

If Bazel is not installed on your system, install it now by following [these
directions](https://bazel.build/versions/master/docs/install.html).

#### Install PyArrow

`tfx_bsl` needs to be built with specific PyArrow versions (
as indicated in third_party/pyarrow.version). Install pyarrow by following
[these directions](https://arrow.apache.org/docs/python/install.html).

When installing please make sure to specify the compatible pyarrow version. For
example:

```shell
pip install "pyarrow>=0.14.0,<0.15.0"
```

### 2. Clone the `tfx_bsl` repository

```shell
git clone https://github.com/tensorflow/tfx-bsl
cd tfx-bsl
```

Note that these instructions will install the latest master branch of `tfx_bsl`
If you want to install a specific branch (such as a release branch),
pass `-b <branchname>` to the `git clone` command.

When building on Python 2, make sure to strip the Python types in the source
code using the following commands:

```shell
pip install strip-hints
python tfx_bsl/tools/strip_type_hints.py tfx_bsl/
```

### 3. Build the pip package

TFDV uses Bazel to build the pip package from source. Before invoking the
following commands, make sure the `python` in your `$PATH` is the one of the
target version and has NumPy and PyArrow installed.

```shell
./configure.sh
bazel run -c opt --cxxopt=-D_GLIBCXX_USE_CXX11_ABI=0 tfx_bsl:build_pip_package
```

The flag `D_GLIBCXX_USE_CXX11_ABI=0` is to use an [older std::string ABI](https://gcc.gnu.org/onlinedocs/libstdc++/manual/using_dual_abi.html). Which
is used by all `manylinux2010` compliant wheels (including PyArrow). If you
also build PyArrow from source without that flag, you may not need to specify
it here.

You can find the generated `.whl` file in the `dist` subdirectory.

### 4. Install the pip package

```shell
pip install dist/*.whl
```

## Supported platforms

`tfx_bsl` is tested on the following 64-bit operating systems:

  * macOS 10.12.6 (Sierra) or later.
  * Ubuntu 16.04 or later.
  * Windows 7 or later.


