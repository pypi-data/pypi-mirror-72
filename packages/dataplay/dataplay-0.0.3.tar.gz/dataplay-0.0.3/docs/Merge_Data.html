---

title: Merge Data

keywords: fastai
sidebar: home_sidebar

summary: "This notebook was made to demonstrate how to merge datasets by matching a single columns values from two datasets. We add columns of data from a foreign dataset into the ACS data we downloaded in our last tutorial."
description: "This notebook was made to demonstrate how to merge datasets by matching a single columns values from two datasets. We add columns of data from a foreign dataset into the ACS data we downloaded in our last tutorial."
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: notebooks/02_Merge_Data.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>/content/drive/My Drive/colabs/dataplay/dataplay/acsDownload.py:27: FutureWarning: Passing a negative integer is deprecated in version 1.0 and will not be supported in future version. Instead, use None to not limit the column width.
  pd.set_option(&#39;display.max_colwidth&#39;, -1)
/usr/local/lib/python3.6/dist-packages/psycopg2/__init__.py:144: UserWarning: The psycopg2 wheel package will be renamed from release 2.8; in order to keep installing from binary please use &#34;pip install psycopg2-binary&#34; instead. For details see: &lt;http://initd.org/psycopg/docs/install.html#binary-install-from-pypi&gt;.
  &#34;&#34;&#34;)
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This Coding Notebook is the <strong>second</strong> in a series.</p>
<p>An Interactive version can be found here <a href="https://colab.research.google.com/github/BNIA/colabs/blob/master/02_Merge_Data.ipynb" target="_parent"><img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"/></a></p>
<p>This colab and more can be found at <a href="https://github.com/BNIA/colabs">https://github.com/BNIA/colabs</a></p>
<ul>
<li><p>Content covered in previous tutorials will be used in later tutorials.</p>
</li>
<li><p><strong>New code and or  information <em>should</em> have explanations and or descriptions</strong> attached.</p>
</li>
<li><p>Concepts or code covered in previous tutorials will be used without being explaining in entirety.</p>
</li>
<li><p><strong>If content can not be found in the current tutorial and is not covered in previous tutorials, please let me know.</strong></p>
</li>
<li><p>This notebook has been optimized for Google Colabs ran on a Chrome Browser.</p>
</li>
<li><p>Statements found in the index page on view expressed, responsibility, errors and ommissions, use at risk, and licensing  extend throughout the tutorial.</p>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="About-this-Tutorial:">About this Tutorial:<a class="anchor-link" href="#About-this-Tutorial:"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Whats-Inside?">Whats Inside?<a class="anchor-link" href="#Whats-Inside?"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="The-Tutorial"><strong>The Tutorial</strong><a class="anchor-link" href="#The-Tutorial"> </a></h4><p>In this notebook, the basics of how to perform a merge is introduced</p>
<ul>
<li>We will merge two datasets</li>
<li>We will merge two datasets using a crosswalk</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Objectives"><strong>Objectives</strong><a class="anchor-link" href="#Objectives"> </a></h4><p>By the end of this tutorial users should have an understanding of:</p>
<ul>
<li>How dataset merges are performed</li>
<li>The types different union approaches a merge can take</li>
<li>the 'mergeData' function, and how to use it in the future</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Guided-Walkthrough">Guided Walkthrough<a class="anchor-link" href="#Guided-Walkthrough"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="SETUP">SETUP<a class="anchor-link" href="#SETUP"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Install these libraries onto the virtual environment.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>pip install geopandas
<span class="o">!</span>pip install dataplay
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Requirement already satisfied: geopandas in /usr/local/lib/python3.6/dist-packages (0.8.0)
Requirement already satisfied: pandas&gt;=0.23.0 in /usr/local/lib/python3.6/dist-packages (from geopandas) (1.0.5)
Requirement already satisfied: pyproj&gt;=2.2.0 in /usr/local/lib/python3.6/dist-packages (from geopandas) (2.6.1.post1)
Requirement already satisfied: shapely in /usr/local/lib/python3.6/dist-packages (from geopandas) (1.7.0)
Requirement already satisfied: fiona in /usr/local/lib/python3.6/dist-packages (from geopandas) (1.8.13.post1)
Requirement already satisfied: pytz&gt;=2017.2 in /usr/local/lib/python3.6/dist-packages (from pandas&gt;=0.23.0-&gt;geopandas) (2018.9)
Requirement already satisfied: numpy&gt;=1.13.3 in /usr/local/lib/python3.6/dist-packages (from pandas&gt;=0.23.0-&gt;geopandas) (1.18.5)
Requirement already satisfied: python-dateutil&gt;=2.6.1 in /usr/local/lib/python3.6/dist-packages (from pandas&gt;=0.23.0-&gt;geopandas) (2.8.1)
Requirement already satisfied: click-plugins&gt;=1.0 in /usr/local/lib/python3.6/dist-packages (from fiona-&gt;geopandas) (1.1.1)
Requirement already satisfied: click&lt;8,&gt;=4.0 in /usr/local/lib/python3.6/dist-packages (from fiona-&gt;geopandas) (7.1.2)
Requirement already satisfied: six&gt;=1.7 in /usr/local/lib/python3.6/dist-packages (from fiona-&gt;geopandas) (1.12.0)
Requirement already satisfied: attrs&gt;=17 in /usr/local/lib/python3.6/dist-packages (from fiona-&gt;geopandas) (19.3.0)
Requirement already satisfied: cligj&gt;=0.5 in /usr/local/lib/python3.6/dist-packages (from fiona-&gt;geopandas) (0.5.0)
Requirement already satisfied: munch in /usr/local/lib/python3.6/dist-packages (from fiona-&gt;geopandas) (2.5.0)
Requirement already satisfied: dataplay in /usr/local/lib/python3.6/dist-packages (0.0.2)
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># @title Run: Install Modules</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="(Optional)-Local-File-Access">(Optional) Local File Access<a class="anchor-link" href="#(Optional)-Local-File-Access"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Nothing we havent already seen.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Retrieve-Datasets">Retrieve Datasets<a class="anchor-link" href="#Retrieve-Datasets"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Our example will merge two simple datasets; pulling CSA names using tract ID's.</p>
<p>The <strong>First</strong> dataset will be obtained from the Census' ACS 5-year serveys.</p>
<p>Functions used to obtain this data were obtained from Tutorial 0) ACS: Explore and Download.</p>
<p>The <strong>Second</strong> dataset will be obtained using using a CSV from a publicly accessible link</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Get-the-Principal-dataset.">Get the Principal dataset.<a class="anchor-link" href="#Get-the-Principal-dataset."> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We will use the function we created in our last tutorial to download the data!</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Our download function will use Baltimore City&#39;s tract, county and state as internal paramters</span>
<span class="c1"># Change these values in the cell below using different geographic reference codes will change those parameters</span>
<span class="n">tract</span> <span class="o">=</span> <span class="s1">&#39;*&#39;</span>
<span class="n">county</span> <span class="o">=</span> <span class="s1">&#39;510&#39;</span>
<span class="n">state</span> <span class="o">=</span> <span class="s1">&#39;24&#39;</span>

<span class="c1"># Specify the download parameters the function will receieve here</span>
<span class="n">tableId</span> <span class="o">=</span> <span class="s1">&#39;B19001&#39;</span>
<span class="n">year</span> <span class="o">=</span> <span class="s1">&#39;17&#39;</span>
<span class="n">saveAcs</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">retrieve_acs_data</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">county</span><span class="p">,</span> <span class="n">tract</span><span class="p">,</span> <span class="n">tableId</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">saveAcs</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Get-the-Secondary-Dataset">Get the Secondary Dataset<a class="anchor-link" href="#Get-the-Secondary-Dataset"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Spatial data can be attained by using the 2010 Census Tract Shapefile Picking <a href="https://www.census.gov/cgi-bin/geo/shapefiles/index.php?year=2010&amp;layergroup=Census+Tracts">Tool</a> or search their website for
Tiger/<a href="https://www.census.gov/geographies/mapping-files/time-series/geo/tiger-line-file.2010.html">Line</a> Shapefiles</p>
<blockquote><p>The core TIGER/Line Files and Shapefiles do not include demographic data, but they do contain geographic entity codes (GEOIDs) that can be linked to the Census Bureau’s demographic data, available on data.census.gov.-census.gov</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Get the Second dataset. </span>
<span class="c1"># Our Example dataset contains Polygon Geometry information. </span>
<span class="c1"># We want to merge this over to our principle dataset. </span>
<span class="c1"># we will grab it by matching on either CSA or Tract</span>

<span class="c1"># The url listed below is public.</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Tract 2 CSA Crosswalk : https://docs.google.com/spreadsheets/d/e/2PACX-1vREwwa_s8Ix39OYGnnS_wA8flOoEkU7reIV4o3ZhlwYhLXhpNEvnOia_uHUDBvnFptkLLHHlaQNvsQE/pub?output=csv&#39;</span><span class="p">)</span>

<span class="n">inFile</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> Please enter the location of your file : </span><span class="se">\n</span><span class="s2">&quot;</span> <span class="p">)</span>

<span class="n">crosswalk</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span> <span class="n">inFile</span> <span class="p">)</span>
<span class="n">crosswalk</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Perform-Merge-&amp;-Save">Perform Merge &amp; Save<a class="anchor-link" href="#Perform-Merge-&amp;-Save"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The following picture does nothing important but serves as a friendly reminder of the 4 basic join types.</p>
<image src="https://docs.trifacta.com/download/attachments/123830435/JoinVennDiagram.png" height='200px'/>

<ul>
<li>Left - returns all left records, only includes the right record if it has a match</li>
<li>Right - Returns all right records, only includes the left record if it has a match </li>
<li>Full - Returns all records regardless of keys matching</li>
<li>Inner - Returns only records where a key match</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Boundaries Example: https://docs.google.com/spreadsheets/d/e/2PACX-1vQ8xXdUaT17jkdK0MWTJpg3GOy6jMWeaXTlguXNjCSb8Vr_FanSZQRaTU-m811fQz4kyMFK5wcahMNY/pub?gid=886223646&amp;single=true&amp;output=csv&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Boundaries Example: https://docs.google.com/spreadsheets/d/e/2PACX-1vQ8xXdUaT17jkdK0MWTJpg3GOy6jMWeaXTlguXNjCSb8Vr_FanSZQRaTU-m811fQz4kyMFK5wcahMNY/pub?gid=886223646&amp;single=true&amp;output=csv
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Get Columns from both datasets to match on</p>
<p>You can get these values from the column values above.</p>
<p>Our Examples will work with the prompted values</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;Princpal Columns &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="n">left_on</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Left on principal column: (&#39;tract&#39;) </span><span class="se">\n</span><span class="s2">&quot;</span> <span class="p">)</span>

<span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;Crosswalk Columns &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">crosswalk</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="n">right_on</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Right on crosswalk column: (&#39;TRACT2010&#39;, or, &#39;TRACTCE10&#39;) </span><span class="se">\n</span><span class="s2">&quot;</span> <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Princpal Columns Index([&#39;B19001_001E_Total&#39;, &#39;B19001_002E_Total_Less_than_$10_000&#39;,
       &#39;B19001_003E_Total_$10_000_to_$14_999&#39;,
       &#39;B19001_004E_Total_$15_000_to_$19_999&#39;,
       &#39;B19001_005E_Total_$20_000_to_$24_999&#39;,
       &#39;B19001_006E_Total_$25_000_to_$29_999&#39;,
       &#39;B19001_007E_Total_$30_000_to_$34_999&#39;,
       &#39;B19001_008E_Total_$35_000_to_$39_999&#39;,
       &#39;B19001_009E_Total_$40_000_to_$44_999&#39;,
       &#39;B19001_010E_Total_$45_000_to_$49_999&#39;,
       &#39;B19001_011E_Total_$50_000_to_$59_999&#39;,
       &#39;B19001_012E_Total_$60_000_to_$74_999&#39;,
       &#39;B19001_013E_Total_$75_000_to_$99_999&#39;,
       &#39;B19001_014E_Total_$100_000_to_$124_999&#39;,
       &#39;B19001_015E_Total_$125_000_to_$149_999&#39;,
       &#39;B19001_016E_Total_$150_000_to_$199_999&#39;,
       &#39;B19001_017E_Total_$200_000_or_more&#39;, &#39;state&#39;, &#39;county&#39;, &#39;tract&#39;],
      dtype=&#39;object&#39;)
Left on principal column: (&#39;tract&#39;) 
tract
Crosswalk Columns Index([&#39;TRACT2010&#39;, &#39;GEOID2010&#39;, &#39;CSA2010&#39;], dtype=&#39;object&#39;)
Right on crosswalk column: (&#39;TRACT2010&#39;, or, &#39;TRACTCE10&#39;) 
TRACT2010
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Specify how the merge will be performed</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We will perform a left merge in this example.</p>
<p>It will return our Principal dataset with columns from the second dataset appended to records where their specified columns match.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">how</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;How: (‘left’, ‘right’, ‘outer’, ‘inner’) &quot;</span> <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>How: (‘left’, ‘right’, ‘outer’, ‘inner’) inner
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Actually perfrom the merge</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">merged_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">crosswalk</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="n">left_on</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="n">right_on</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="n">how</span><span class="p">)</span>
<span class="n">merged_df</span> <span class="o">=</span> <span class="n">merged_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">left_on</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">merged_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>B19001_001E_Total</th>
      <th>B19001_002E_Total_Less_than_$10_000</th>
      <th>B19001_003E_Total_$10_000_to_$14_999</th>
      <th>B19001_004E_Total_$15_000_to_$19_999</th>
      <th>B19001_005E_Total_$20_000_to_$24_999</th>
      <th>B19001_006E_Total_$25_000_to_$29_999</th>
      <th>B19001_007E_Total_$30_000_to_$34_999</th>
      <th>B19001_008E_Total_$35_000_to_$39_999</th>
      <th>B19001_009E_Total_$40_000_to_$44_999</th>
      <th>B19001_010E_Total_$45_000_to_$49_999</th>
      <th>B19001_011E_Total_$50_000_to_$59_999</th>
      <th>B19001_012E_Total_$60_000_to_$74_999</th>
      <th>B19001_013E_Total_$75_000_to_$99_999</th>
      <th>B19001_014E_Total_$100_000_to_$124_999</th>
      <th>B19001_015E_Total_$125_000_to_$149_999</th>
      <th>B19001_016E_Total_$150_000_to_$199_999</th>
      <th>B19001_017E_Total_$200_000_or_more</th>
      <th>state</th>
      <th>county</th>
      <th>TRACT2010</th>
      <th>GEOID2010</th>
      <th>CSA2010</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>796</td>
      <td>237</td>
      <td>76</td>
      <td>85</td>
      <td>38</td>
      <td>79</td>
      <td>43</td>
      <td>36</td>
      <td>35</td>
      <td>15</td>
      <td>43</td>
      <td>45</td>
      <td>39</td>
      <td>5</td>
      <td>0</td>
      <td>6</td>
      <td>14</td>
      <td>24</td>
      <td>510</td>
      <td>190100</td>
      <td>24510190100</td>
      <td>Southwest Baltimore</td>
    </tr>
    <tr>
      <th>1</th>
      <td>695</td>
      <td>63</td>
      <td>87</td>
      <td>93</td>
      <td>6</td>
      <td>58</td>
      <td>30</td>
      <td>14</td>
      <td>29</td>
      <td>23</td>
      <td>38</td>
      <td>113</td>
      <td>70</td>
      <td>6</td>
      <td>32</td>
      <td>11</td>
      <td>22</td>
      <td>24</td>
      <td>510</td>
      <td>190200</td>
      <td>24510190200</td>
      <td>Southwest Baltimore</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2208</td>
      <td>137</td>
      <td>229</td>
      <td>124</td>
      <td>52</td>
      <td>78</td>
      <td>87</td>
      <td>50</td>
      <td>80</td>
      <td>13</td>
      <td>217</td>
      <td>66</td>
      <td>159</td>
      <td>205</td>
      <td>167</td>
      <td>146</td>
      <td>398</td>
      <td>24</td>
      <td>510</td>
      <td>220100</td>
      <td>24510220100</td>
      <td>Inner Harbor/Fed...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>632</td>
      <td>3</td>
      <td>20</td>
      <td>0</td>
      <td>39</td>
      <td>7</td>
      <td>0</td>
      <td>29</td>
      <td>8</td>
      <td>9</td>
      <td>44</td>
      <td>29</td>
      <td>98</td>
      <td>111</td>
      <td>63</td>
      <td>94</td>
      <td>78</td>
      <td>24</td>
      <td>510</td>
      <td>230300</td>
      <td>24510230300</td>
      <td>South Baltimore</td>
    </tr>
    <tr>
      <th>4</th>
      <td>836</td>
      <td>102</td>
      <td>28</td>
      <td>101</td>
      <td>64</td>
      <td>104</td>
      <td>76</td>
      <td>41</td>
      <td>40</td>
      <td>47</td>
      <td>72</td>
      <td>28</td>
      <td>60</td>
      <td>19</td>
      <td>27</td>
      <td>15</td>
      <td>12</td>
      <td>24</td>
      <td>510</td>
      <td>250207</td>
      <td>24510250207</td>
      <td>Cherry Hill</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As you can see, our Census data will now have a CSA appended to it.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Save Data to User Specified File</span>
<span class="n">outFile</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Please enter the new Filename to save the data to (&#39;acs_csa_merge_test&#39;: &quot;</span> <span class="p">)</span>
<span class="n">merged_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">outFile</span><span class="o">+</span><span class="s1">&#39;.csv&#39;</span><span class="p">,</span> <span class="n">quoting</span><span class="o">=</span><span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_ALL</span><span class="p">)</span> 
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Please enter the new Filename to save the data to (&#39;acs_csa_merge_test&#39;: asdfsaf
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Final-Result">Final Result<a class="anchor-link" href="#Final-Result"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">flag</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Enter a URL? If not ACS data will be used. (Y/N):  &quot;</span> <span class="p">)</span>
<span class="k">if</span> <span class="p">(</span><span class="n">flag</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span> <span class="ow">or</span> <span class="n">flag</span> <span class="o">==</span> <span class="s1">&#39;Y&#39;</span><span class="p">):</span>
  <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Please enter the location of your Principal file: &quot;</span> <span class="p">)</span> <span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">tract</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Please enter tract id (*): &quot;</span> <span class="p">)</span>
  <span class="n">county</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Please enter county id (510): &quot;</span> <span class="p">)</span>
  <span class="n">state</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Please enter state id (24): &quot;</span> <span class="p">)</span>
  <span class="n">tableId</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Please enter acs table id (B19001): &quot;</span> <span class="p">)</span> 
  <span class="n">year</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Please enter acs year (18): &quot;</span> <span class="p">)</span>
  <span class="n">saveAcs</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Save ACS? (True/False): &quot;</span> <span class="p">)</span>
  <span class="n">df</span> <span class="o">=</span> <span class="n">retrieve_acs_data</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">county</span><span class="p">,</span> <span class="n">tract</span><span class="p">,</span> <span class="n">tableId</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">saveAcs</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;Principal Columns &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Crosswalk Example: https://docs.google.com/spreadsheets/d/e/2PACX-1vREwwa_s8Ix39OYGnnS_wA8flOoEkU7reIV4o3ZhlwYhLXhpNEvnOia_uHUDBvnFptkLLHHlaQNvsQE/pub?output=csv&#39;</span><span class="p">)</span>

<span class="n">crosswalk</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Please enter the location of your crosswalk file: &quot;</span> <span class="p">)</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;Crosswalk Columns &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">crosswalk</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">left_on</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Left on: &quot;</span> <span class="p">)</span>
<span class="n">right_on</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Right on: &quot;</span> <span class="p">)</span>
<span class="n">how</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;How: (‘left’, ‘right’, ‘outer’, ‘inner’) &quot;</span> <span class="p">)</span>

<span class="n">merged_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">crosswalk</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="n">left_on</span><span class="p">,</span> <span class="n">right_on</span><span class="o">=</span><span class="n">right_on</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="n">how</span><span class="p">)</span>
<span class="n">merged_df</span> <span class="o">=</span> <span class="n">merged_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">left_on</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Save the data</span>
<span class="c1"># Save the data</span>
<span class="n">saveFile</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Save File (&#39;Y&#39; or &#39;N&#39;): &quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">saveFile</span> <span class="o">==</span> <span class="s1">&#39;Y&#39;</span> <span class="ow">or</span> <span class="n">saveFile</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
  <span class="n">outFile</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Saved Filename (Do not include the file extension ): &quot;</span><span class="p">)</span>
  <span class="n">merged_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">outFile</span><span class="o">+</span><span class="s1">&#39;.csv&#39;</span><span class="p">,</span> <span class="n">quoting</span><span class="o">=</span><span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_ALL</span><span class="p">);</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Enter a URL? If not ACS data will be used. (Y/N):  y
Please enter the location of your Principal file: https://docs.google.com/spreadsheets/d/e/2PACX-1vREwwa_s8Ix39OYGnnS_wA8flOoEkU7reIV4o3ZhlwYhLXhpNEvnOia_uHUDBvnFptkLLHHlaQNvsQE/pub?output=csv
Principal Columns Index([&#39;TRACT2010&#39;, &#39;GEOID2010&#39;, &#39;CSA2010&#39;], dtype=&#39;object&#39;)
Crosswalk Example: https://docs.google.com/spreadsheets/d/e/2PACX-1vREwwa_s8Ix39OYGnnS_wA8flOoEkU7reIV4o3ZhlwYhLXhpNEvnOia_uHUDBvnFptkLLHHlaQNvsQE/pub?output=csv
Please enter the location of your crosswalk file: https://docs.google.com/spreadsheets/d/e/2PACX-1vREwwa_s8Ix39OYGnnS_wA8flOoEkU7reIV4o3ZhlwYhLXhpNEvnOia_uHUDBvnFptkLLHHlaQNvsQE/pub?output=csv
Crosswalk Columns Index([&#39;TRACT2010&#39;, &#39;GEOID2010&#39;, &#39;CSA2010&#39;], dtype=&#39;object&#39;)

Left on: TRACT2010
Right on: TRACT2010
How: (‘left’, ‘right’, ‘outer’, ‘inner’) inner
Save File (&#39;Y&#39; or &#39;N&#39;): n
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">merged_df</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GEOID2010_x</th>
      <th>CSA2010_x</th>
      <th>GEOID2010_y</th>
      <th>CSA2010_y</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>24510010100</td>
      <td>Canton</td>
      <td>24510010100</td>
      <td>Canton</td>
    </tr>
    <tr>
      <th>1</th>
      <td>24510010200</td>
      <td>Patterson Park N...</td>
      <td>24510010200</td>
      <td>Patterson Park N...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>24510010300</td>
      <td>Canton</td>
      <td>24510010300</td>
      <td>Canton</td>
    </tr>
    <tr>
      <th>3</th>
      <td>24510010400</td>
      <td>Canton</td>
      <td>24510010400</td>
      <td>Canton</td>
    </tr>
    <tr>
      <th>4</th>
      <td>24510010500</td>
      <td>Fells Point</td>
      <td>24510010500</td>
      <td>Fells Point</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>196</th>
      <td>24510280402</td>
      <td>Edmondson Village</td>
      <td>24510280402</td>
      <td>Edmondson Village</td>
    </tr>
    <tr>
      <th>197</th>
      <td>24510280403</td>
      <td>Beechfield/Ten H...</td>
      <td>24510280403</td>
      <td>Beechfield/Ten H...</td>
    </tr>
    <tr>
      <th>198</th>
      <td>24510280404</td>
      <td>Allendale/Irving...</td>
      <td>24510280404</td>
      <td>Allendale/Irving...</td>
    </tr>
    <tr>
      <th>199</th>
      <td>24510280500</td>
      <td>Oldtown/Middle East</td>
      <td>24510280500</td>
      <td>Oldtown/Middle East</td>
    </tr>
    <tr>
      <th>200</th>
      <td>0</td>
      <td>Baltimore City</td>
      <td>0</td>
      <td>Baltimore City</td>
    </tr>
  </tbody>
</table>
<p>201 rows × 4 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Change some those parameters</span>
<span class="n">tract</span> <span class="o">=</span> <span class="s1">&#39;*&#39;</span>
<span class="n">county</span> <span class="o">=</span> <span class="s1">&#39;510&#39;</span>
<span class="n">state</span> <span class="o">=</span> <span class="s1">&#39;24&#39;</span>

<span class="c1"># Specify the download parameters the function will receieve here</span>
<span class="n">tableId</span> <span class="o">=</span> <span class="s1">&#39;B19001&#39;</span>
<span class="n">year</span> <span class="o">=</span> <span class="s1">&#39;17&#39;</span>
<span class="n">saveAcs</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Advanced">Advanced<a class="anchor-link" href="#Advanced"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Intro</strong></p>
<p>The following Python function is a bulked out version of the previous notes.</p>
<ul>
<li>It contains everything from the tutorial plus more.</li>
<li>It can be imported and used in future projects or stand alone.</li>
</ul>
<p><strong>Description:</strong> add columns of data from a foreign dataset into a primary dataset along set parameters.</p>
<p><strong>Purpose:</strong> Makes Merging datasets simple</p>
<p><strong>Services</strong></p>
<ul>
<li>Merge two datasets without a crosswalk</li>
<li>Merge two datasets with a crosswalk</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="mergeDatasets" class="doc_header"><code>mergeDatasets</code><a href="https://github.com/karpatic/dataplay/tree/master/dataplay/merge.py#L22" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>mergeDatasets</code>(<strong><code>left_ds</code></strong>=<em><code>False</code></em>, <strong><code>right_ds</code></strong>=<em><code>False</code></em>, <strong><code>crosswalk_ds</code></strong>=<em><code>False</code></em>, <strong><code>use_crosswalk</code></strong>=<em><code>True</code></em>, <strong><code>left_col</code></strong>=<em><code>False</code></em>, <strong><code>right_col</code></strong>=<em><code>False</code></em>, <strong><code>crosswalk_left_col</code></strong>=<em><code>False</code></em>, <strong><code>crosswalk_right_col</code></strong>=<em><code>False</code></em>, <strong><code>merge_how</code></strong>=<em><code>False</code></em>, <strong><code>interactive</code></strong>=<em><code>True</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Function-Explanation">Function Explanation<a class="anchor-link" href="#Function-Explanation"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Input(s):</strong></p>
<ul>
<li>Dataset url</li>
<li>Crosswalk Url </li>
<li>Right On </li>
<li>Left On </li>
<li>How </li>
<li>New Filename </li>
</ul>
<p><strong>Output:</strong> File</p>
<p><strong>How it works:</strong></p>
<ul>
<li>Read in datasets</li>
<li><p>Perform Merge</p>
</li>
<li><p>If the 'how' parameter is equal to ['left', 'right', 'outer', 'inner']</p>
</li>
<li><ul>
<li>then a merge will be performed. </li>
</ul>
</li>
<li>If a column name is provided in the 'how' parameter</li>
<li><ul>
<li>then that single column will be pulled from the right dataset as a new column in the left_ds.</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Function-Diagrams">Function Diagrams<a class="anchor-link" href="#Function-Diagrams"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#@title Run: Diagram the mergeDatasets()</span>

<span class="o">%%</span><span class="k">html</span>
&lt;img src=&quot;https://charleskarpati.com/images/class_diagram_merge_datasets.png&quot;&gt;
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<img src="https://charleskarpati.com/images/class_diagram_merge_datasets.png">
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#@title Run: mergeDatasets Flow Chart</span>

<span class="o">%%</span><span class="k">html</span>
&lt;img src=&quot;https://charleskarpati.com/images/flow_chart_merge_datasets.png&quot;&gt;
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<img src="https://charleskarpati.com/images/flow_chart_merge_datasets.png">
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#@title Run: Gannt Chart  mergeDatasets()</span>

<span class="o">%%</span><span class="k">html</span>
&lt;img src=&quot;https://charleskarpati.com/images/gannt_chart_merge_datasets.png&quot;&gt;
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<img src="https://charleskarpati.com/images/gannt_chart_merge_datasets.png">
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#@title Run: Sequence Diagram  mergeDatasets()</span>

<span class="o">%%</span><span class="k">html</span>
&lt;img src=&quot;https://charleskarpati.com/images/sequence_diagram_merge_datasets.png&quot;&gt;
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<img src="https://charleskarpati.com/images/sequence_diagram_merge_datasets.png">
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Function-Examples">Function Examples<a class="anchor-link" href="#Function-Examples"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Interactive-Example-1">Interactive Example 1<a class="anchor-link" href="#Interactive-Example-1"> </a></h4>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Table: FDIC Baltimore Banks</span>
<span class="c1"># Columns: Bank Name, Address(es), Census Tract</span>
<span class="n">left_ds</span> <span class="o">=</span> <span class="s1">&#39;https://docs.google.com/spreadsheets/d/e/2PACX-1vSHFrRSHva1f82ZQ7Uxwf3A1phqljj1oa2duGlZDM1vLtrm1GI5yHmpVX2ilTfMHQ/pub?gid=601362340&amp;single=true&amp;output=csv&#39;</span>
<span class="n">left_col</span> <span class="o">=</span> <span class="s1">&#39;Census Tract&#39;</span>

<span class="c1"># Table: Crosswalk Census Communities</span>
<span class="c1"># &#39;TRACT2010&#39;, &#39;GEOID2010&#39;, &#39;CSA2010&#39;</span>
<span class="n">right_ds</span> <span class="o">=</span> <span class="s1">&#39;https://docs.google.com/spreadsheets/d/e/2PACX-1vREwwa_s8Ix39OYGnnS_wA8flOoEkU7reIV4o3ZhlwYhLXhpNEvnOia_uHUDBvnFptkLLHHlaQNvsQE/pub?output=csv&#39;</span>
<span class="n">right_col</span><span class="o">=</span><span class="s1">&#39;TRACT2010&#39;</span>

<span class="n">merge_how</span> <span class="o">=</span> <span class="s1">&#39;outer&#39;</span>
<span class="n">interactive</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">use_crosswalk</span> <span class="o">=</span> <span class="kc">True</span>

<span class="n">merged_df</span> <span class="o">=</span> <span class="n">mergeDatasets</span><span class="p">(</span> <span class="n">left_ds</span><span class="o">=</span><span class="n">left_ds</span><span class="p">,</span> <span class="n">left_col</span><span class="o">=</span><span class="n">left_col</span><span class="p">,</span> 
              <span class="n">right_ds</span><span class="o">=</span><span class="n">right_ds</span><span class="p">,</span> <span class="n">right_col</span><span class="o">=</span><span class="n">right_col</span><span class="p">,</span> 
              <span class="n">merge_how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">interactive</span> <span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">use_crosswalk</span><span class="o">=</span><span class="n">use_crosswalk</span> <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>
 Handling Left Dataset
Please provide a new dataset URL: https://docs.google.com/spreadsheets/d/e/2PACX-1vSHFrRSHva1f82ZQ7Uxwf3A1phqljj1oa2duGlZDM1vLtrm1GI5yHmpVX2ilTfMHQ/pub?gid=601362340&amp;single=true&amp;output=csv
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">KeyboardInterrupt</span>                         Traceback (most recent call last)
<span class="ansi-green-fg">/usr/local/lib/python3.6/dist-packages/ipykernel/kernelbase.py</span> in <span class="ansi-cyan-fg">_input_request</span><span class="ansi-blue-fg">(self, prompt, ident, parent, password)</span>
<span class="ansi-green-intense-fg ansi-bold">    728</span>             <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 729</span><span class="ansi-red-fg">                 </span>ident<span class="ansi-blue-fg">,</span> reply <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>session<span class="ansi-blue-fg">.</span>recv<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">.</span>stdin_socket<span class="ansi-blue-fg">,</span> <span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    730</span>             <span class="ansi-green-fg">except</span> Exception<span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">/usr/local/lib/python3.6/dist-packages/jupyter_client/session.py</span> in <span class="ansi-cyan-fg">recv</span><span class="ansi-blue-fg">(self, socket, mode, content, copy)</span>
<span class="ansi-green-intense-fg ansi-bold">    802</span>         <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 803</span><span class="ansi-red-fg">             </span>msg_list <span class="ansi-blue-fg">=</span> socket<span class="ansi-blue-fg">.</span>recv_multipart<span class="ansi-blue-fg">(</span>mode<span class="ansi-blue-fg">,</span> copy<span class="ansi-blue-fg">=</span>copy<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    804</span>         <span class="ansi-green-fg">except</span> zmq<span class="ansi-blue-fg">.</span>ZMQError <span class="ansi-green-fg">as</span> e<span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">/usr/local/lib/python3.6/dist-packages/zmq/sugar/socket.py</span> in <span class="ansi-cyan-fg">recv_multipart</span><span class="ansi-blue-fg">(self, flags, copy, track)</span>
<span class="ansi-green-intense-fg ansi-bold">    474</span>         &#34;&#34;&#34;
<span class="ansi-green-fg">--&gt; 475</span><span class="ansi-red-fg">         </span>parts <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">[</span>self<span class="ansi-blue-fg">.</span>recv<span class="ansi-blue-fg">(</span>flags<span class="ansi-blue-fg">,</span> copy<span class="ansi-blue-fg">=</span>copy<span class="ansi-blue-fg">,</span> track<span class="ansi-blue-fg">=</span>track<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">]</span>
<span class="ansi-green-intense-fg ansi-bold">    476</span>         <span class="ansi-red-fg"># have first part already, only loop while more to receive</span>

<span class="ansi-green-fg">zmq/backend/cython/socket.pyx</span> in <span class="ansi-cyan-fg">zmq.backend.cython.socket.Socket.recv</span><span class="ansi-blue-fg">()</span>

<span class="ansi-green-fg">zmq/backend/cython/socket.pyx</span> in <span class="ansi-cyan-fg">zmq.backend.cython.socket.Socket.recv</span><span class="ansi-blue-fg">()</span>

<span class="ansi-green-fg">zmq/backend/cython/socket.pyx</span> in <span class="ansi-cyan-fg">zmq.backend.cython.socket._recv_copy</span><span class="ansi-blue-fg">()</span>

<span class="ansi-green-fg">/usr/local/lib/python3.6/dist-packages/zmq/backend/cython/checkrc.pxd</span> in <span class="ansi-cyan-fg">zmq.backend.cython.checkrc._check_rc</span><span class="ansi-blue-fg">()</span>

<span class="ansi-red-fg">KeyboardInterrupt</span>: 

During handling of the above exception, another exception occurred:

<span class="ansi-red-fg">KeyboardInterrupt</span>                         Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-3-e39c26c3e796&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">     15</span> merged_df = mergeDatasets( left_ds=left_ds, left_col=left_col, 
<span class="ansi-green-intense-fg ansi-bold">     16</span>               right_ds<span class="ansi-blue-fg">=</span>right_ds<span class="ansi-blue-fg">,</span> right_col<span class="ansi-blue-fg">=</span>right_col<span class="ansi-blue-fg">,</span>
<span class="ansi-green-fg">---&gt; 17</span><span class="ansi-red-fg">               merge_how=&#39;left&#39;, interactive =True, use_crosswalk=use_crosswalk )
</span>
<span class="ansi-green-fg">&lt;ipython-input-1-474dd398e9f9&gt;</span> in <span class="ansi-cyan-fg">mergeDatasets</span><span class="ansi-blue-fg">(left_ds, right_ds, crosswalk_ds, use_crosswalk, left_col, right_col, crosswalk_left_col, crosswalk_right_col, merge_how, interactive)</span>
<span class="ansi-green-intense-fg ansi-bold">    300</span>     <span class="ansi-green-fg">return</span> left_ds
<span class="ansi-green-intense-fg ansi-bold">    301</span> 
<span class="ansi-green-fg">--&gt; 302</span><span class="ansi-red-fg">   </span><span class="ansi-green-fg">return</span> main<span class="ansi-blue-fg">(</span> left_ds<span class="ansi-blue-fg">,</span> right_ds<span class="ansi-blue-fg">,</span> crosswalk_ds<span class="ansi-blue-fg">,</span> use_crosswalk<span class="ansi-blue-fg">,</span> left_col<span class="ansi-blue-fg">,</span> right_col<span class="ansi-blue-fg">,</span> crosswalk_left_col<span class="ansi-blue-fg">,</span> crosswalk_right_col<span class="ansi-blue-fg">,</span> merge_how<span class="ansi-blue-fg">,</span> interactive <span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">&lt;ipython-input-1-474dd398e9f9&gt;</span> in <span class="ansi-cyan-fg">main</span><span class="ansi-blue-fg">(left_ds, right_ds, crosswalk_ds, use_crosswalk, left_col, right_col, crosswalk_left_col, crosswalk_right_col, merge_how, interactive)</span>
<span class="ansi-green-intense-fg ansi-bold">    217</span> 
<span class="ansi-green-intense-fg ansi-bold">    218</span>     <span class="ansi-green-fg">if</span><span class="ansi-blue-fg">(</span>interactive<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>print<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;\n Handling Left Dataset&#39;</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">;</span>
<span class="ansi-green-fg">--&gt; 219</span><span class="ansi-red-fg">     </span>left_ds<span class="ansi-blue-fg">,</span> left_col<span class="ansi-blue-fg">,</span> dfStatus<span class="ansi-blue-fg">,</span> colStatus <span class="ansi-blue-fg">=</span> handleDatasetAndColumns<span class="ansi-blue-fg">(</span>left_ds<span class="ansi-blue-fg">,</span> left_col<span class="ansi-blue-fg">,</span> interactive<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    220</span>     <span class="ansi-green-fg">if</span> <span class="ansi-blue-fg">(</span> dfStatus <span class="ansi-green-fg">and</span> colStatus <span class="ansi-green-fg">and</span> interactive<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    221</span>       print<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;Left Dataset and Columns are Valid&#39;</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">;</span>

<span class="ansi-green-fg">&lt;ipython-input-1-474dd398e9f9&gt;</span> in <span class="ansi-cyan-fg">handleDatasetAndColumns</span><span class="ansi-blue-fg">(df, col, interactive)</span>
<span class="ansi-green-intense-fg ansi-bold">    156</span>     dfStatus <span class="ansi-blue-fg">=</span> colStatus <span class="ansi-blue-fg">=</span> <span class="ansi-green-fg">True</span>
<span class="ansi-green-intense-fg ansi-bold">    157</span>     <span class="ansi-red-fg"># Ensure A Dataset is being handled</span>
<span class="ansi-green-fg">--&gt; 158</span><span class="ansi-red-fg">     </span>df <span class="ansi-blue-fg">=</span> processDataset<span class="ansi-blue-fg">(</span>df<span class="ansi-blue-fg">,</span> interactive<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    159</span>     <span class="ansi-green-fg">if</span> <span class="ansi-blue-fg">(</span> <span class="ansi-green-fg">not</span> checkDataSetExists<span class="ansi-blue-fg">(</span>df<span class="ansi-blue-fg">)</span> <span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span> dfStatus <span class="ansi-blue-fg">=</span> <span class="ansi-green-fg">False</span>
<span class="ansi-green-intense-fg ansi-bold">    160</span> 

<span class="ansi-green-fg">&lt;ipython-input-1-474dd398e9f9&gt;</span> in <span class="ansi-cyan-fg">processDataset</span><span class="ansi-blue-fg">(df, interactive)</span>
<span class="ansi-green-intense-fg ansi-bold">    145</span>     df <span class="ansi-blue-fg">=</span> retrieveDatasetFromUrl<span class="ansi-blue-fg">(</span>df<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    146</span>     <span class="ansi-red-fg"># If !DF and interactive, re-processDataset w/a new URL</span>
<span class="ansi-green-fg">--&gt; 147</span><span class="ansi-red-fg">     </span>df <span class="ansi-blue-fg">=</span> retrieveUrlForDataset<span class="ansi-blue-fg">(</span>df<span class="ansi-blue-fg">,</span> interactive<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    148</span>     <span class="ansi-green-fg">return</span> df
<span class="ansi-green-intense-fg ansi-bold">    149</span> 

<span class="ansi-green-fg">&lt;ipython-input-1-474dd398e9f9&gt;</span> in <span class="ansi-cyan-fg">retrieveUrlForDataset</span><span class="ansi-blue-fg">(df, interactive)</span>
<span class="ansi-green-intense-fg ansi-bold">    137</span>     <span class="ansi-green-fg">if</span> <span class="ansi-blue-fg">(</span> <span class="ansi-green-fg">not</span> dsExists <span class="ansi-green-fg">and</span> interactive<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    138</span>       df <span class="ansi-blue-fg">=</span> input<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;Please provide a new dataset URL: &#34;</span> <span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">;</span>
<span class="ansi-green-fg">--&gt; 139</span><span class="ansi-red-fg">       </span><span class="ansi-green-fg">return</span> processDataset<span class="ansi-blue-fg">(</span>df<span class="ansi-blue-fg">,</span> interactive<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    140</span> 
<span class="ansi-green-intense-fg ansi-bold">    141</span>   <span class="ansi-red-fg"># Ensures a Pandas DF is returned.</span>

<span class="ansi-green-fg">&lt;ipython-input-1-474dd398e9f9&gt;</span> in <span class="ansi-cyan-fg">processDataset</span><span class="ansi-blue-fg">(df, interactive)</span>
<span class="ansi-green-intense-fg ansi-bold">    145</span>     df <span class="ansi-blue-fg">=</span> retrieveDatasetFromUrl<span class="ansi-blue-fg">(</span>df<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    146</span>     <span class="ansi-red-fg"># If !DF and interactive, re-processDataset w/a new URL</span>
<span class="ansi-green-fg">--&gt; 147</span><span class="ansi-red-fg">     </span>df <span class="ansi-blue-fg">=</span> retrieveUrlForDataset<span class="ansi-blue-fg">(</span>df<span class="ansi-blue-fg">,</span> interactive<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    148</span>     <span class="ansi-green-fg">return</span> df
<span class="ansi-green-intense-fg ansi-bold">    149</span> 

<span class="ansi-green-fg">&lt;ipython-input-1-474dd398e9f9&gt;</span> in <span class="ansi-cyan-fg">retrieveUrlForDataset</span><span class="ansi-blue-fg">(df, interactive)</span>
<span class="ansi-green-intense-fg ansi-bold">    136</span>     <span class="ansi-green-fg">if</span> <span class="ansi-blue-fg">(</span> <span class="ansi-green-fg">not</span> dsExists <span class="ansi-green-fg">and</span> <span class="ansi-green-fg">not</span> interactive<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span> <span class="ansi-green-fg">return</span> <span class="ansi-green-fg">False</span><span class="ansi-blue-fg">;</span>
<span class="ansi-green-intense-fg ansi-bold">    137</span>     <span class="ansi-green-fg">if</span> <span class="ansi-blue-fg">(</span> <span class="ansi-green-fg">not</span> dsExists <span class="ansi-green-fg">and</span> interactive<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 138</span><span class="ansi-red-fg">       </span>df <span class="ansi-blue-fg">=</span> input<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;Please provide a new dataset URL: &#34;</span> <span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">;</span>
<span class="ansi-green-intense-fg ansi-bold">    139</span>       <span class="ansi-green-fg">return</span> processDataset<span class="ansi-blue-fg">(</span>df<span class="ansi-blue-fg">,</span> interactive<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    140</span> 

<span class="ansi-green-fg">/usr/local/lib/python3.6/dist-packages/ipykernel/kernelbase.py</span> in <span class="ansi-cyan-fg">raw_input</span><span class="ansi-blue-fg">(self, prompt)</span>
<span class="ansi-green-intense-fg ansi-bold">    702</span>             self<span class="ansi-blue-fg">.</span>_parent_ident<span class="ansi-blue-fg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    703</span>             self<span class="ansi-blue-fg">.</span>_parent_header<span class="ansi-blue-fg">,</span>
<span class="ansi-green-fg">--&gt; 704</span><span class="ansi-red-fg">             </span>password<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    705</span>         )
<span class="ansi-green-intense-fg ansi-bold">    706</span> 

<span class="ansi-green-fg">/usr/local/lib/python3.6/dist-packages/ipykernel/kernelbase.py</span> in <span class="ansi-cyan-fg">_input_request</span><span class="ansi-blue-fg">(self, prompt, ident, parent, password)</span>
<span class="ansi-green-intense-fg ansi-bold">    732</span>             <span class="ansi-green-fg">except</span> KeyboardInterrupt<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    733</span>                 <span class="ansi-red-fg"># re-raise KeyboardInterrupt, to truncate traceback</span>
<span class="ansi-green-fg">--&gt; 734</span><span class="ansi-red-fg">                 </span><span class="ansi-green-fg">raise</span> KeyboardInterrupt
<span class="ansi-green-intense-fg ansi-bold">    735</span>             <span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    736</span>                 <span class="ansi-green-fg">break</span>

<span class="ansi-red-fg">KeyboardInterrupt</span>: </pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">merged_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>TRACT2010</th>
      <th>GEOID2010_x</th>
      <th>CSA2010_x</th>
      <th>GEOID2010_y</th>
      <th>CSA2010_y</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10100</td>
      <td>24510010100</td>
      <td>Canton</td>
      <td>24510010100</td>
      <td>Canton</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10200</td>
      <td>24510010200</td>
      <td>Patterson Park North &amp; East</td>
      <td>24510010200</td>
      <td>Patterson Park North &amp; East</td>
    </tr>
    <tr>
      <th>2</th>
      <td>10300</td>
      <td>24510010300</td>
      <td>Canton</td>
      <td>24510010300</td>
      <td>Canton</td>
    </tr>
    <tr>
      <th>3</th>
      <td>10400</td>
      <td>24510010400</td>
      <td>Canton</td>
      <td>24510010400</td>
      <td>Canton</td>
    </tr>
    <tr>
      <th>4</th>
      <td>10500</td>
      <td>24510010500</td>
      <td>Fells Point</td>
      <td>24510010500</td>
      <td>Fells Point</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Example-1.5-)-Get-CSA-and-Geometry-with-a-Crosswalk.">Example 1.5 ) Get CSA and Geometry with a Crosswalk.<a class="anchor-link" href="#Example-1.5-)-Get-CSA-and-Geometry-with-a-Crosswalk."> </a></h4>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Primary Table</span>
<span class="c1"># Description: I created a public dataset from a google xlsx sheet &#39;Bank Addresses and Census Tract&#39; from a workbook of the same name.</span>
<span class="c1"># Table: FDIC Baltimore Banks</span>
<span class="c1"># Columns: Bank Name, Address(es), Census Tract</span>
<span class="n">left_ds</span> <span class="o">=</span> <span class="s1">&#39;https://docs.google.com/spreadsheets/d/e/2PACX-1vSHFrRSHva1f82ZQ7Uxwf3A1phqljj1oa2duGlZDM1vLtrm1GI5yHmpVX2ilTfMHQ/pub?gid=601362340&amp;single=true&amp;output=csv&#39;</span>
<span class="n">left_col</span> <span class="o">=</span> <span class="s1">&#39;Census Tract&#39;</span>

<span class="c1"># Alternate Primary Table</span>
<span class="c1"># Description: Same workbook, different Sheet: &#39;Branches per tract&#39; </span>
<span class="c1"># Columns: Census Tract, Number branches per tract</span>
<span class="c1"># left_ds = &#39;https://docs.google.com/spreadsheets/d/e/2PACX-1vSHFrRSHva1f82ZQ7Uxwf3A1phqljj1oa2duGlZDM1vLtrm1GI5yHmpVX2ilTfMHQ/pub?gid=1698745725&amp;single=true&amp;output=csv&#39;</span>
<span class="c1"># lef_col = &#39;Number branches per tract&#39;</span>

<span class="c1"># Crosswalk Table</span>
<span class="c1"># Table: Crosswalk Census Communities</span>
<span class="c1"># &#39;TRACT2010&#39;, &#39;GEOID2010&#39;, &#39;CSA2010&#39;</span>
<span class="n">crosswalk_ds</span> <span class="o">=</span> <span class="s1">&#39;https://docs.google.com/spreadsheets/d/e/2PACX-1vREwwa_s8Ix39OYGnnS_wA8flOoEkU7reIV4o3ZhlwYhLXhpNEvnOia_uHUDBvnFptkLLHHlaQNvsQE/pub?output=csv&#39;</span>
<span class="n">use_crosswalk</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">crosswalk_left_col</span> <span class="o">=</span> <span class="s1">&#39;TRACT2010&#39;</span>
<span class="n">crosswalk_right_col</span> <span class="o">=</span> <span class="s1">&#39;GEOID2010&#39;</span>

<span class="c1"># Secondary Table</span>
<span class="c1"># Table: Baltimore Boundaries</span>
<span class="c1"># &#39;TRACTCE10&#39;, &#39;GEOID10&#39;, &#39;CSA&#39;, &#39;NAME10&#39;, &#39;Tract&#39;, &#39;geometry&#39;</span>
<span class="n">right_ds</span> <span class="o">=</span> <span class="s1">&#39;https://docs.google.com/spreadsheets/d/e/2PACX-1vTPKW6YOHPFvkw3FM3m5y67-Aa5ZlrM0Ee1Fb57wlGuldr99sEvVWnkej30FXhSb3j8o9gr8izq2ZRP/pub?output=csv&#39;</span>
<span class="n">right_col</span> <span class="o">=</span><span class="s1">&#39;GEOID10&#39;</span>

<span class="n">merge_how</span> <span class="o">=</span> <span class="s1">&#39;geometry&#39;</span>
<span class="n">interactive</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">merge_how</span> <span class="o">=</span> <span class="s1">&#39;outer&#39;</span>

<span class="n">merged_df</span> <span class="o">=</span> <span class="n">mergeDatasets</span><span class="p">(</span> <span class="n">left_ds</span><span class="o">=</span><span class="n">left_ds</span><span class="p">,</span> <span class="n">left_col</span><span class="o">=</span><span class="n">left_col</span><span class="p">,</span> 
              <span class="n">use_crosswalk</span><span class="o">=</span><span class="n">use_crosswalk</span><span class="p">,</span> <span class="n">crosswalk_ds</span><span class="o">=</span><span class="n">crosswalk_ds</span><span class="p">,</span>
              <span class="n">crosswalk_left_col</span> <span class="o">=</span> <span class="n">crosswalk_left_col</span><span class="p">,</span> <span class="n">crosswalk_right_col</span> <span class="o">=</span> <span class="n">crosswalk_right_col</span><span class="p">,</span>
              <span class="n">right_ds</span><span class="o">=</span><span class="n">right_ds</span><span class="p">,</span> <span class="n">right_col</span><span class="o">=</span><span class="n">right_col</span><span class="p">,</span> 
              <span class="n">merge_how</span><span class="o">=</span><span class="n">merge_how</span><span class="p">,</span> <span class="n">interactive</span> <span class="o">=</span> <span class="n">interactive</span> <span class="p">)</span>

<span class="n">merged_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>
 Handling Left Dataset
Please provide a new dataset URL: https://docs.google.com/spreadsheets/d/e/2PACX-1vSHFrRSHva1f82ZQ7Uxwf3A1phqljj1oa2duGlZDM1vLtrm1GI5yHmpVX2ilTfMHQ/pub?gid=601362340&amp;single=true&amp;output=csv
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">KeyboardInterrupt</span>                         Traceback (most recent call last)
<span class="ansi-green-fg">/usr/local/lib/python3.6/dist-packages/ipykernel/kernelbase.py</span> in <span class="ansi-cyan-fg">_input_request</span><span class="ansi-blue-fg">(self, prompt, ident, parent, password)</span>
<span class="ansi-green-intense-fg ansi-bold">    728</span>             <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 729</span><span class="ansi-red-fg">                 </span>ident<span class="ansi-blue-fg">,</span> reply <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>session<span class="ansi-blue-fg">.</span>recv<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">.</span>stdin_socket<span class="ansi-blue-fg">,</span> <span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    730</span>             <span class="ansi-green-fg">except</span> Exception<span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">/usr/local/lib/python3.6/dist-packages/jupyter_client/session.py</span> in <span class="ansi-cyan-fg">recv</span><span class="ansi-blue-fg">(self, socket, mode, content, copy)</span>
<span class="ansi-green-intense-fg ansi-bold">    802</span>         <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 803</span><span class="ansi-red-fg">             </span>msg_list <span class="ansi-blue-fg">=</span> socket<span class="ansi-blue-fg">.</span>recv_multipart<span class="ansi-blue-fg">(</span>mode<span class="ansi-blue-fg">,</span> copy<span class="ansi-blue-fg">=</span>copy<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    804</span>         <span class="ansi-green-fg">except</span> zmq<span class="ansi-blue-fg">.</span>ZMQError <span class="ansi-green-fg">as</span> e<span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">/usr/local/lib/python3.6/dist-packages/zmq/sugar/socket.py</span> in <span class="ansi-cyan-fg">recv_multipart</span><span class="ansi-blue-fg">(self, flags, copy, track)</span>
<span class="ansi-green-intense-fg ansi-bold">    474</span>         &#34;&#34;&#34;
<span class="ansi-green-fg">--&gt; 475</span><span class="ansi-red-fg">         </span>parts <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">[</span>self<span class="ansi-blue-fg">.</span>recv<span class="ansi-blue-fg">(</span>flags<span class="ansi-blue-fg">,</span> copy<span class="ansi-blue-fg">=</span>copy<span class="ansi-blue-fg">,</span> track<span class="ansi-blue-fg">=</span>track<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">]</span>
<span class="ansi-green-intense-fg ansi-bold">    476</span>         <span class="ansi-red-fg"># have first part already, only loop while more to receive</span>

<span class="ansi-green-fg">zmq/backend/cython/socket.pyx</span> in <span class="ansi-cyan-fg">zmq.backend.cython.socket.Socket.recv</span><span class="ansi-blue-fg">()</span>

<span class="ansi-green-fg">zmq/backend/cython/socket.pyx</span> in <span class="ansi-cyan-fg">zmq.backend.cython.socket.Socket.recv</span><span class="ansi-blue-fg">()</span>

<span class="ansi-green-fg">zmq/backend/cython/socket.pyx</span> in <span class="ansi-cyan-fg">zmq.backend.cython.socket._recv_copy</span><span class="ansi-blue-fg">()</span>

<span class="ansi-green-fg">/usr/local/lib/python3.6/dist-packages/zmq/backend/cython/checkrc.pxd</span> in <span class="ansi-cyan-fg">zmq.backend.cython.checkrc._check_rc</span><span class="ansi-blue-fg">()</span>

<span class="ansi-red-fg">KeyboardInterrupt</span>: 

During handling of the above exception, another exception occurred:

<span class="ansi-red-fg">KeyboardInterrupt</span>                         Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-4-6d9c4070a229&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">     34</span>               crosswalk_left_col <span class="ansi-blue-fg">=</span> crosswalk_left_col<span class="ansi-blue-fg">,</span> crosswalk_right_col <span class="ansi-blue-fg">=</span> crosswalk_right_col<span class="ansi-blue-fg">,</span>
<span class="ansi-green-intense-fg ansi-bold">     35</span>               right_ds<span class="ansi-blue-fg">=</span>right_ds<span class="ansi-blue-fg">,</span> right_col<span class="ansi-blue-fg">=</span>right_col<span class="ansi-blue-fg">,</span>
<span class="ansi-green-fg">---&gt; 36</span><span class="ansi-red-fg">               merge_how=merge_how, interactive = interactive )
</span><span class="ansi-green-intense-fg ansi-bold">     37</span> 
<span class="ansi-green-intense-fg ansi-bold">     38</span> merged_df<span class="ansi-blue-fg">.</span>head<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">&lt;ipython-input-1-474dd398e9f9&gt;</span> in <span class="ansi-cyan-fg">mergeDatasets</span><span class="ansi-blue-fg">(left_ds, right_ds, crosswalk_ds, use_crosswalk, left_col, right_col, crosswalk_left_col, crosswalk_right_col, merge_how, interactive)</span>
<span class="ansi-green-intense-fg ansi-bold">    300</span>     <span class="ansi-green-fg">return</span> left_ds
<span class="ansi-green-intense-fg ansi-bold">    301</span> 
<span class="ansi-green-fg">--&gt; 302</span><span class="ansi-red-fg">   </span><span class="ansi-green-fg">return</span> main<span class="ansi-blue-fg">(</span> left_ds<span class="ansi-blue-fg">,</span> right_ds<span class="ansi-blue-fg">,</span> crosswalk_ds<span class="ansi-blue-fg">,</span> use_crosswalk<span class="ansi-blue-fg">,</span> left_col<span class="ansi-blue-fg">,</span> right_col<span class="ansi-blue-fg">,</span> crosswalk_left_col<span class="ansi-blue-fg">,</span> crosswalk_right_col<span class="ansi-blue-fg">,</span> merge_how<span class="ansi-blue-fg">,</span> interactive <span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">&lt;ipython-input-1-474dd398e9f9&gt;</span> in <span class="ansi-cyan-fg">main</span><span class="ansi-blue-fg">(left_ds, right_ds, crosswalk_ds, use_crosswalk, left_col, right_col, crosswalk_left_col, crosswalk_right_col, merge_how, interactive)</span>
<span class="ansi-green-intense-fg ansi-bold">    217</span> 
<span class="ansi-green-intense-fg ansi-bold">    218</span>     <span class="ansi-green-fg">if</span><span class="ansi-blue-fg">(</span>interactive<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>print<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;\n Handling Left Dataset&#39;</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">;</span>
<span class="ansi-green-fg">--&gt; 219</span><span class="ansi-red-fg">     </span>left_ds<span class="ansi-blue-fg">,</span> left_col<span class="ansi-blue-fg">,</span> dfStatus<span class="ansi-blue-fg">,</span> colStatus <span class="ansi-blue-fg">=</span> handleDatasetAndColumns<span class="ansi-blue-fg">(</span>left_ds<span class="ansi-blue-fg">,</span> left_col<span class="ansi-blue-fg">,</span> interactive<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    220</span>     <span class="ansi-green-fg">if</span> <span class="ansi-blue-fg">(</span> dfStatus <span class="ansi-green-fg">and</span> colStatus <span class="ansi-green-fg">and</span> interactive<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    221</span>       print<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;Left Dataset and Columns are Valid&#39;</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">;</span>

<span class="ansi-green-fg">&lt;ipython-input-1-474dd398e9f9&gt;</span> in <span class="ansi-cyan-fg">handleDatasetAndColumns</span><span class="ansi-blue-fg">(df, col, interactive)</span>
<span class="ansi-green-intense-fg ansi-bold">    156</span>     dfStatus <span class="ansi-blue-fg">=</span> colStatus <span class="ansi-blue-fg">=</span> <span class="ansi-green-fg">True</span>
<span class="ansi-green-intense-fg ansi-bold">    157</span>     <span class="ansi-red-fg"># Ensure A Dataset is being handled</span>
<span class="ansi-green-fg">--&gt; 158</span><span class="ansi-red-fg">     </span>df <span class="ansi-blue-fg">=</span> processDataset<span class="ansi-blue-fg">(</span>df<span class="ansi-blue-fg">,</span> interactive<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    159</span>     <span class="ansi-green-fg">if</span> <span class="ansi-blue-fg">(</span> <span class="ansi-green-fg">not</span> checkDataSetExists<span class="ansi-blue-fg">(</span>df<span class="ansi-blue-fg">)</span> <span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span> dfStatus <span class="ansi-blue-fg">=</span> <span class="ansi-green-fg">False</span>
<span class="ansi-green-intense-fg ansi-bold">    160</span> 

<span class="ansi-green-fg">&lt;ipython-input-1-474dd398e9f9&gt;</span> in <span class="ansi-cyan-fg">processDataset</span><span class="ansi-blue-fg">(df, interactive)</span>
<span class="ansi-green-intense-fg ansi-bold">    145</span>     df <span class="ansi-blue-fg">=</span> retrieveDatasetFromUrl<span class="ansi-blue-fg">(</span>df<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    146</span>     <span class="ansi-red-fg"># If !DF and interactive, re-processDataset w/a new URL</span>
<span class="ansi-green-fg">--&gt; 147</span><span class="ansi-red-fg">     </span>df <span class="ansi-blue-fg">=</span> retrieveUrlForDataset<span class="ansi-blue-fg">(</span>df<span class="ansi-blue-fg">,</span> interactive<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    148</span>     <span class="ansi-green-fg">return</span> df
<span class="ansi-green-intense-fg ansi-bold">    149</span> 

<span class="ansi-green-fg">&lt;ipython-input-1-474dd398e9f9&gt;</span> in <span class="ansi-cyan-fg">retrieveUrlForDataset</span><span class="ansi-blue-fg">(df, interactive)</span>
<span class="ansi-green-intense-fg ansi-bold">    137</span>     <span class="ansi-green-fg">if</span> <span class="ansi-blue-fg">(</span> <span class="ansi-green-fg">not</span> dsExists <span class="ansi-green-fg">and</span> interactive<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    138</span>       df <span class="ansi-blue-fg">=</span> input<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;Please provide a new dataset URL: &#34;</span> <span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">;</span>
<span class="ansi-green-fg">--&gt; 139</span><span class="ansi-red-fg">       </span><span class="ansi-green-fg">return</span> processDataset<span class="ansi-blue-fg">(</span>df<span class="ansi-blue-fg">,</span> interactive<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    140</span> 
<span class="ansi-green-intense-fg ansi-bold">    141</span>   <span class="ansi-red-fg"># Ensures a Pandas DF is returned.</span>

<span class="ansi-green-fg">&lt;ipython-input-1-474dd398e9f9&gt;</span> in <span class="ansi-cyan-fg">processDataset</span><span class="ansi-blue-fg">(df, interactive)</span>
<span class="ansi-green-intense-fg ansi-bold">    145</span>     df <span class="ansi-blue-fg">=</span> retrieveDatasetFromUrl<span class="ansi-blue-fg">(</span>df<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    146</span>     <span class="ansi-red-fg"># If !DF and interactive, re-processDataset w/a new URL</span>
<span class="ansi-green-fg">--&gt; 147</span><span class="ansi-red-fg">     </span>df <span class="ansi-blue-fg">=</span> retrieveUrlForDataset<span class="ansi-blue-fg">(</span>df<span class="ansi-blue-fg">,</span> interactive<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    148</span>     <span class="ansi-green-fg">return</span> df
<span class="ansi-green-intense-fg ansi-bold">    149</span> 

<span class="ansi-green-fg">&lt;ipython-input-1-474dd398e9f9&gt;</span> in <span class="ansi-cyan-fg">retrieveUrlForDataset</span><span class="ansi-blue-fg">(df, interactive)</span>
<span class="ansi-green-intense-fg ansi-bold">    136</span>     <span class="ansi-green-fg">if</span> <span class="ansi-blue-fg">(</span> <span class="ansi-green-fg">not</span> dsExists <span class="ansi-green-fg">and</span> <span class="ansi-green-fg">not</span> interactive<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span> <span class="ansi-green-fg">return</span> <span class="ansi-green-fg">False</span><span class="ansi-blue-fg">;</span>
<span class="ansi-green-intense-fg ansi-bold">    137</span>     <span class="ansi-green-fg">if</span> <span class="ansi-blue-fg">(</span> <span class="ansi-green-fg">not</span> dsExists <span class="ansi-green-fg">and</span> interactive<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 138</span><span class="ansi-red-fg">       </span>df <span class="ansi-blue-fg">=</span> input<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;Please provide a new dataset URL: &#34;</span> <span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">;</span>
<span class="ansi-green-intense-fg ansi-bold">    139</span>       <span class="ansi-green-fg">return</span> processDataset<span class="ansi-blue-fg">(</span>df<span class="ansi-blue-fg">,</span> interactive<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    140</span> 

<span class="ansi-green-fg">/usr/local/lib/python3.6/dist-packages/ipykernel/kernelbase.py</span> in <span class="ansi-cyan-fg">raw_input</span><span class="ansi-blue-fg">(self, prompt)</span>
<span class="ansi-green-intense-fg ansi-bold">    702</span>             self<span class="ansi-blue-fg">.</span>_parent_ident<span class="ansi-blue-fg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    703</span>             self<span class="ansi-blue-fg">.</span>_parent_header<span class="ansi-blue-fg">,</span>
<span class="ansi-green-fg">--&gt; 704</span><span class="ansi-red-fg">             </span>password<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    705</span>         )
<span class="ansi-green-intense-fg ansi-bold">    706</span> 

<span class="ansi-green-fg">/usr/local/lib/python3.6/dist-packages/ipykernel/kernelbase.py</span> in <span class="ansi-cyan-fg">_input_request</span><span class="ansi-blue-fg">(self, prompt, ident, parent, password)</span>
<span class="ansi-green-intense-fg ansi-bold">    732</span>             <span class="ansi-green-fg">except</span> KeyboardInterrupt<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    733</span>                 <span class="ansi-red-fg"># re-raise KeyboardInterrupt, to truncate traceback</span>
<span class="ansi-green-fg">--&gt; 734</span><span class="ansi-red-fg">                 </span><span class="ansi-green-fg">raise</span> KeyboardInterrupt
<span class="ansi-green-intense-fg ansi-bold">    735</span>             <span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    736</span>                 <span class="ansi-green-fg">break</span>

<span class="ansi-red-fg">KeyboardInterrupt</span>: </pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Here we can save the data so that it may be used in later tutorials.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">string</span> <span class="o">=</span> <span class="s1">&#39;test_save_data_with_geom_and_csa&#39;</span>
<span class="n">merged_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">string</span><span class="o">+</span><span class="s1">&#39;.csv&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">quoting</span><span class="o">=</span><span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_ALL</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Download data by:</p>
<ul>
<li>Clicking the 'Files' tab in the left hand menu of this screen. Locate your file within the file explorer that appears directly under the 'Files' tab button once clicked. Right click the file in the file explorer and select the 'download' option from the dropdown.  </li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In the next tutorial you will learn how to load this data as a geospatial dataset so that it may be mapped and mapping functionalities may be applied to it.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can upload this data into the next tutorial in one of two ways.</p>
<p>1)</p>
<ul>
<li>uploading the saved file to google Drive and connecting to your drive path</li>
</ul>
<p>OR.</p>
<p>2)</p>
<ul>
<li>'by first downloading the dataset as directed above, and then navigating to the next tutorial. Go to their page and:</li>
<li>Uploading data using an file 'upload' button accessible within the 'Files' tab in the left hand menu of this screen. The next tutorial will teach you how to load this data so that it may be mapped.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Interactive-Example-2">Interactive Example 2<a class="anchor-link" href="#Interactive-Example-2"> </a></h4>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># When the prompts come up input the values not included from Interactive Example 1 and you will get the same output.</span>
<span class="c1"># This is to demonstrate that not all parameters must be known prior to executing the function.</span>

<span class="n">mergeDatasets</span><span class="p">(</span> <span class="n">left_ds</span><span class="o">=</span><span class="n">left_ds</span><span class="p">,</span> <span class="n">left_col</span><span class="o">=</span><span class="n">left_col</span><span class="p">,</span> <span class="n">right_ds</span><span class="o">=</span><span class="n">right_ds</span><span class="p">,</span> <span class="n">interactive</span> <span class="o">=</span><span class="kc">True</span> <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">mergedDataset</span> <span class="o">=</span> <span class="n">mergeDatasets</span><span class="p">(</span> <span class="n">left_ds</span><span class="o">=</span><span class="n">left_ds</span><span class="p">,</span> <span class="n">left_col</span><span class="o">=</span><span class="n">left_col</span><span class="p">,</span> <span class="n">use_crosswalk</span><span class="o">=</span><span class="n">use_crosswalk</span><span class="p">,</span> <span class="n">right_ds</span><span class="o">=</span><span class="n">right_ds</span><span class="p">,</span> <span class="n">right_col</span><span class="o">=</span><span class="n">right_col</span><span class="p">,</span> <span class="n">merge_how</span> <span class="o">=</span> <span class="n">merge_how</span><span class="p">,</span> <span class="n">interactive</span> <span class="o">=</span> <span class="n">interactive</span> <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">mergedDataset</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Interactive-Run-Alone">Interactive Run Alone<a class="anchor-link" href="#Interactive-Run-Alone"> </a></h4>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">mergeDatasets</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Preconfigured-Example-1">Preconfigured Example 1<a class="anchor-link" href="#Preconfigured-Example-1"> </a></h4>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Census Crosswalk</span>
<span class="c1"># &#39;TRACT2010&#39;, &#39;GEOID2010&#39;, &#39;CSA2010&#39;</span>
<span class="n">left_ds</span> <span class="o">=</span> <span class="s1">&#39;https://docs.google.com/spreadsheets/d/e/2PACX-1vREwwa_s8Ix39OYGnnS_wA8flOoEkU7reIV4o3ZhlwYhLXhpNEvnOia_uHUDBvnFptkLLHHlaQNvsQE/pub?output=csv&#39;</span>

<span class="c1"># Baltimore Boundaries</span>
<span class="c1"># &#39;TRACTCE10&#39;, &#39;GEOID10&#39;, &#39;CSA&#39;, &#39;NAME10&#39;, &#39;Tract&#39;, &#39;geometry&#39;</span>
<span class="n">right_ds</span> <span class="o">=</span> <span class="s1">&#39;https://docs.google.com/spreadsheets/d/e/2PACX-1vTPKW6YOHPFvkw3FM3m5y67-Aa5ZlrM0Ee1Fb57wlGuldr99sEvVWnkej30FXhSb3j8o9gr8izq2ZRP/pub?output=csv&#39;</span>
<span class="c1"># The Left DS Cols will map to the first three Right DS Cols listed</span>
<span class="n">left_col</span> <span class="o">=</span> <span class="s1">&#39;GEOID2010&#39;</span>
<span class="n">right_col</span> <span class="o">=</span> <span class="s1">&#39;GEOID10&#39;</span>
<span class="n">merge_how</span> <span class="o">=</span> <span class="s1">&#39;outer&#39;</span>
<span class="n">interactive</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">mergeDatasets</span><span class="p">(</span> <span class="n">left_ds</span><span class="o">=</span><span class="n">left_ds</span><span class="p">,</span> <span class="n">left_col</span><span class="o">=</span><span class="n">left_col</span><span class="p">,</span> <span class="n">right_ds</span><span class="o">=</span><span class="n">right_ds</span><span class="p">,</span> <span class="n">right_col</span><span class="o">=</span><span class="n">right_col</span><span class="p">,</span> <span class="n">merge_how</span> <span class="o">=</span> <span class="n">merge_how</span><span class="p">,</span> <span class="n">interactive</span> <span class="o">=</span> <span class="n">interactive</span> <span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

