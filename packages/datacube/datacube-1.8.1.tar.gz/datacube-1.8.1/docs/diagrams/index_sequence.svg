<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1585px" preserveAspectRatio="none" style="width:1478px;height:1585px;" version="1.1" viewBox="0 0 1478 1585" width="1478px" zoomAndPan="magnify"><defs><filter height="300%" id="f1urdgrq93cu81" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142" x="663.75" y="22.9951">Initialise Database</text><rect fill="#FFFFFF" filter="url(#f1urdgrq93cu81)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="316.5" y="558.4844"/><rect fill="#FFFFFF" filter="url(#f1urdgrq93cu81)" height="291.3281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="316.5" y="1160.0078"/><rect fill="#FFFFFF" filter="url(#f1urdgrq93cu81)" height="177.8281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="493.5" y="380.6563"/><rect fill="#FFFFFF" filter="url(#f1urdgrq93cu81)" height="105.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="498.5" y="423.8203"/><rect fill="#FFFFFF" filter="url(#f1urdgrq93cu81)" height="63.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="503.5" y="465.9531"/><rect fill="#FFFFFF" filter="url(#f1urdgrq93cu81)" height="145.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="493.5" y="699.0156"/><rect fill="#FFFFFF" filter="url(#f1urdgrq93cu81)" height="145.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="493.5" y="912.9453"/><rect fill="#FFFFFF" filter="url(#f1urdgrq93cu81)" height="262.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="493.5" y="1189.1406"/><rect fill="#FFFFFF" filter="url(#f1urdgrq93cu81)" height="233.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1306.5" y="1218.2734"/><rect fill="#FEFECE" filter="url(#f1urdgrq93cu81)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="448.5" y="349.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="455.5" y="369.5186">PostgresDb</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="166" x2="166" y1="95.5938" y2="1512.4688"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="321" x2="321" y1="95.5938" y2="1512.4688"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="498.5" x2="498.5" y1="382.1719" y2="1512.4688"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="635" x2="635" y1="95.5938" y2="1512.4688"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="802" x2="802" y1="95.5938" y2="1512.4688"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="999" x2="999" y1="95.5938" y2="1512.4688"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1150" x2="1150" y1="95.5938" y2="1512.4688"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1311.5" x2="1311.5" y1="95.5938" y2="1512.4688"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1436.5" x2="1436.5" y1="95.5938" y2="1512.4688"/><rect fill="#FEFECE" filter="url(#f1urdgrq93cu81)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="45" x="142" y="60.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="149" y="80.292">Test</text><rect fill="#FEFECE" filter="url(#f1urdgrq93cu81)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="45" x="142" y="1511.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31" x="149" y="1531.4639">Test</text><rect fill="#FEFECE" filter="url(#f1urdgrq93cu81)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="51" x="294" y="60.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="301" y="80.292">Index</text><rect fill="#FEFECE" filter="url(#f1urdgrq93cu81)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="51" x="294" y="1511.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="301" y="1531.4639">Index</text><rect fill="#FEFECE" filter="url(#f1urdgrq93cu81)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="448.5" y="1511.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="455.5" y="1531.4639">PostgresDb</text><rect fill="#FEFECE" filter="url(#f1urdgrq93cu81)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="117" x="575" y="60.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="103" x="582" y="80.292">PostgresDbAPI</text><rect fill="#FEFECE" filter="url(#f1urdgrq93cu81)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="117" x="575" y="1511.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="103" x="582" y="1531.4639">PostgresDbAPI</text><rect fill="#FEFECE" filter="url(#f1urdgrq93cu81)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="189" x="706" y="60.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="175" x="713" y="80.292">PostgresDbInTransaction</text><rect fill="#FEFECE" filter="url(#f1urdgrq93cu81)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="189" x="706" y="1511.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="175" x="713" y="1531.4639">PostgresDbInTransaction</text><rect fill="#FEFECE" filter="url(#f1urdgrq93cu81)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="176" x="909" y="60.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="162" x="916" y="80.292">PostgresDbConnection</text><rect fill="#FEFECE" filter="url(#f1urdgrq93cu81)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="176" x="909" y="1511.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="162" x="916" y="1531.4639">PostgresDbConnection</text><rect fill="#FEFECE" filter="url(#f1urdgrq93cu81)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="1099" y="60.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="1106" y="80.292">SQLAlchemy</text><rect fill="#FEFECE" filter="url(#f1urdgrq93cu81)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="1099" y="1511.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="1106" y="1531.4639">SQLAlchemy</text><rect fill="#FEFECE" filter="url(#f1urdgrq93cu81)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="52" x="1283.5" y="60.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="38" x="1290.5" y="80.292">_core</text><rect fill="#FEFECE" filter="url(#f1urdgrq93cu81)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="52" x="1283.5" y="1511.4688"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="38" x="1290.5" y="1531.4639">_core</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="1411.5" y="92.292">Server</text><path d="M1418.5,43.2969 C1418.5,33.2969 1436.5,33.2969 1436.5,33.2969 C1436.5,33.2969 1454.5,33.2969 1454.5,43.2969 L1454.5,69.2969 C1454.5,79.2969 1436.5,79.2969 1436.5,79.2969 C1436.5,79.2969 1418.5,79.2969 1418.5,69.2969 L1418.5,43.2969 " fill="#FEFECE" filter="url(#f1urdgrq93cu81)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1418.5,43.2969 C1418.5,53.2969 1436.5,53.2969 1436.5,53.2969 C1436.5,53.2969 1454.5,53.2969 1454.5,43.2969 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="1411.5" y="1524.4639">Server</text><path d="M1418.5,1537.7656 C1418.5,1527.7656 1436.5,1527.7656 1436.5,1527.7656 C1436.5,1527.7656 1454.5,1527.7656 1454.5,1537.7656 L1454.5,1563.7656 C1454.5,1573.7656 1436.5,1573.7656 1436.5,1573.7656 C1436.5,1573.7656 1418.5,1573.7656 1418.5,1563.7656 L1418.5,1537.7656 " fill="#FEFECE" filter="url(#f1urdgrq93cu81)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1418.5,1537.7656 C1418.5,1547.7656 1436.5,1547.7656 1436.5,1547.7656 C1436.5,1547.7656 1454.5,1547.7656 1454.5,1537.7656 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f1urdgrq93cu81)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="316.5" y="558.4844"/><rect fill="#FFFFFF" filter="url(#f1urdgrq93cu81)" height="291.3281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="316.5" y="1160.0078"/><rect fill="#FFFFFF" filter="url(#f1urdgrq93cu81)" height="177.8281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="493.5" y="380.6563"/><rect fill="#FFFFFF" filter="url(#f1urdgrq93cu81)" height="105.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="498.5" y="423.8203"/><rect fill="#FFFFFF" filter="url(#f1urdgrq93cu81)" height="63.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="503.5" y="465.9531"/><rect fill="#FFFFFF" filter="url(#f1urdgrq93cu81)" height="145.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="493.5" y="699.0156"/><rect fill="#FFFFFF" filter="url(#f1urdgrq93cu81)" height="145.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="493.5" y="912.9453"/><rect fill="#FFFFFF" filter="url(#f1urdgrq93cu81)" height="262.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="493.5" y="1189.1406"/><rect fill="#FFFFFF" filter="url(#f1urdgrq93cu81)" height="233.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1306.5" y="1218.2734"/><path d="M229,110.5938 L229,150.5938 L409,150.5938 L409,120.5938 L399,110.5938 L229,110.5938 " fill="#FBFB77" filter="url(#f1urdgrq93cu81)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M399,110.5938 L399,120.5938 L409,120.5938 L399,110.5938 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="235" y="127.6606">Entry point is</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="322" y="127.6606">connect()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="11" x="235" y="142.7935">in</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="250" y="142.7935">index/_api.py</text><path d="M380,164.8594 L380,189.8594 L613,189.8594 L613,174.8594 L603,164.8594 L380,164.8594 " fill="#FBFB77" filter="url(#f1urdgrq93cu81)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M603,164.8594 L603,174.8594 L613,174.8594 L603,164.8594 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="11" x="386" y="181.9263">In</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="401" y="181.9263">postgres/_connections.py</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="593" y="181.9263">"</text><path d="M549,203.9922 L549,228.9922 L718,228.9922 L718,213.9922 L708,203.9922 L549,203.9922 " fill="#FBFB77" filter="url(#f1urdgrq93cu81)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M708,203.9922 L708,213.9922 L718,213.9922 L708,203.9922 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="11" x="555" y="221.0591">In</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="570" y="221.0591">postgres/_api.py</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="698" y="221.0591">"</text><path d="M711,243.125 L711,268.125 L1089,268.125 L1089,253.125 L1079,243.125 L711,243.125 " fill="#FBFB77" filter="url(#f1urdgrq93cu81)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1079,243.125 L1079,253.125 L1089,253.125 L1079,243.125 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="11" x="787.5" y="260.1919">In</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="802.5" y="260.1919">postgres/_connections.py</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="994.5" y="260.1919">"</text><rect fill="#EEEEEE" filter="url(#f1urdgrq93cu81)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1463.5" x="3" y="297.8242"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1466.5" y1="297.8242" y2="297.8242"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1466.5" y1="300.8242" y2="300.8242"/><rect fill="#EEEEEE" filter="url(#f1urdgrq93cu81)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="260" x="604.75" y="287.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="241" x="610.75" y="303.3247">Create the Database Connection</text><polygon fill="#A80036" points="309.5,337.5234,319.5,341.5234,309.5,345.5234,313.5,341.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="166.5" x2="315.5" y1="341.5234" y2="341.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="173.5" y="336.4575">index_connect()</text><polygon fill="#A80036" points="436.5,366.6563,446.5,370.6563,436.5,374.6563,440.5,370.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="321.5" x2="442.5" y1="370.6563" y2="370.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="328.5" y="365.5903">from_config()</text><rect fill="#FEFECE" filter="url(#f1urdgrq93cu81)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="96" x="448.5" y="349.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="455.5" y="369.5186">PostgresDb</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="503.5" x2="550.5" y1="410.9531" y2="410.9531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="550.5" x2="550.5" y1="410.9531" y2="423.9531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="509.5" x2="550.5" y1="423.9531" y2="423.9531"/><polygon fill="#A80036" points="519.5,419.9531,509.5,423.9531,519.5,427.9531,515.5,423.9531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="515.5" y="405.8872">create()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="508.5" x2="555.5" y1="453.0859" y2="453.0859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="555.5" x2="555.5" y1="453.0859" y2="466.0859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="514.5" x2="555.5" y1="466.0859" y2="466.0859"/><polygon fill="#A80036" points="524.5,462.0859,514.5,466.0859,524.5,470.0859,520.5,466.0859" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="520.5" y="448.02">_create_engine()</text><polygon fill="#A80036" points="1138.5,496.2188,1148.5,500.2188,1138.5,504.2188,1142.5,500.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="513.5" x2="1144.5" y1="500.2188" y2="500.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="520.5" y="495.1528">create_engine()</text><polygon fill="#A80036" points="514.5,525.3516,504.5,529.3516,514.5,533.3516,510.5,529.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="508.5" x2="1149.5" y1="529.3516" y2="529.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="520.5" y="524.2856">returns an engine</text><polygon fill="#A80036" points="337.5,554.4844,327.5,558.4844,337.5,562.4844,333.5,558.4844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="331.5" x2="497.5" y1="558.4844" y2="558.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="343.5" y="553.4185">database ready for use</text><polygon fill="#A80036" points="177.5,583.6172,167.5,587.6172,177.5,591.6172,173.5,587.6172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="171.5" x2="320.5" y1="587.6172" y2="587.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="183.5" y="582.5513">here, have an Index</text><rect fill="#EEEEEE" filter="url(#f1urdgrq93cu81)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1463.5" x="3" y="616.1836"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1466.5" y1="616.1836" y2="616.1836"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1466.5" y1="619.1836" y2="619.1836"/><rect fill="#EEEEEE" filter="url(#f1urdgrq93cu81)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="238" x="615.75" y="605.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="219" x="621.75" y="621.6841">Use the Database Connection</text><path d="M47,643.75 L47,668.75 L282,668.75 L282,653.75 L272,643.75 L47,643.75 " fill="#FBFB77" filter="url(#f1urdgrq93cu81)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M272,643.75 L272,653.75 L282,653.75 L272,643.75 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="53" y="660.8169">Using begin() starts a transaction</text><polygon fill="#A80036" points="481.5,695.0156,491.5,699.0156,481.5,703.0156,485.5,699.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="166.5" x2="487.5" y1="699.0156" y2="699.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="173.5" y="693.9497">begin()</text><polygon fill="#A80036" points="790.5,724.1484,800.5,728.1484,790.5,732.1484,794.5,728.1484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="503.5" x2="796.5" y1="728.1484" y2="728.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="510.5" y="723.0825">_enter__()</text><polygon fill="#A80036" points="646.5,753.2813,636.5,757.2813,646.5,761.2813,642.5,757.2813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="640.5" x2="801.5" y1="757.2813" y2="757.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="652.5" y="752.2153">Construct</text><polygon fill="#A80036" points="790.5,782.4141,800.5,786.4141,790.5,790.4141,794.5,786.4141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="635.5" x2="796.5" y1="786.4141" y2="786.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="22" x="642.5" y="781.3481">self</text><polygon fill="#A80036" points="514.5,811.5469,504.5,815.5469,514.5,819.5469,510.5,815.5469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="508.5" x2="801.5" y1="815.5469" y2="815.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="520.5" y="810.481">return PostgresDbAPI</text><polygon fill="#A80036" points="177.5,840.6797,167.5,844.6797,177.5,848.6797,173.5,844.6797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="171.5" x2="497.5" y1="844.6797" y2="844.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="183.5" y="839.6138">a PostgresDbAPI</text><path d="M8,857.6797 L8,882.6797 L321,882.6797 L321,867.6797 L311,857.6797 L8,857.6797 " fill="#FBFB77" filter="url(#f1urdgrq93cu81)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M311,857.6797 L311,867.6797 L321,867.6797 L311,857.6797 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="14" y="874.7466">Using connect() does</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="30" x="154" y="874.7466">NOT</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="188" y="874.7466">start a transaction</text><polygon fill="#A80036" points="481.5,908.9453,491.5,912.9453,481.5,916.9453,485.5,912.9453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="166.5" x2="487.5" y1="912.9453" y2="912.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="173.5" y="907.8794">connect()</text><polygon fill="#A80036" points="987,938.0781,997,942.0781,987,946.0781,991,942.0781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="503.5" x2="993" y1="942.0781" y2="942.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="510.5" y="937.0122">_enter__()</text><polygon fill="#A80036" points="646.5,967.2109,636.5,971.2109,646.5,975.2109,642.5,971.2109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="640.5" x2="998" y1="971.2109" y2="971.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="652.5" y="966.145">Construct</text><polygon fill="#A80036" points="987,996.3438,997,1000.3438,987,1004.3438,991,1000.3438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="635.5" x2="993" y1="1000.3438" y2="1000.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="22" x="642.5" y="995.2778">self</text><polygon fill="#A80036" points="514.5,1025.4766,504.5,1029.4766,514.5,1033.4766,510.5,1029.4766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="508.5" x2="998" y1="1029.4766" y2="1029.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="520.5" y="1024.4106">return PostgresDbAPI</text><polygon fill="#A80036" points="177.5,1054.6094,167.5,1058.6094,177.5,1062.6094,173.5,1058.6094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="171.5" x2="497.5" y1="1058.6094" y2="1058.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="183.5" y="1053.5435">a PostgresDbAPI</text><rect fill="#EEEEEE" filter="url(#f1urdgrq93cu81)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1463.5" x="3" y="1087.1758"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1466.5" y1="1087.1758" y2="1087.1758"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1466.5" y1="1090.1758" y2="1090.1758"/><rect fill="#EEEEEE" filter="url(#f1urdgrq93cu81)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="297" x="586.25" y="1076.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="278" x="592.25" y="1092.6763">Create an Index using the Connection</text><polygon fill="#A80036" points="309.5,1126.875,319.5,1130.875,309.5,1134.875,313.5,1130.875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="166.5" x2="315.5" y1="1130.875" y2="1130.875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="173.5" y="1125.8091">dunder_init()</text><polygon fill="#A80036" points="304.5,1156.0078,314.5,1160.0078,304.5,1164.0078,308.5,1160.0078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="166.5" x2="310.5" y1="1160.0078" y2="1160.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="173.5" y="1154.9419">init_db()</text><polygon fill="#A80036" points="481.5,1185.1406,491.5,1189.1406,481.5,1193.1406,485.5,1189.1406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="326.5" x2="487.5" y1="1189.1406" y2="1189.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="333.5" y="1184.0747">init()</text><polygon fill="#A80036" points="1294.5,1214.2734,1304.5,1218.2734,1294.5,1222.2734,1298.5,1218.2734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="503.5" x2="1300.5" y1="1218.2734" y2="1218.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="510.5" y="1213.2075">ensure_db(self._engine)</text><polygon fill="#A80036" points="1161.5,1243.4063,1151.5,1247.4063,1161.5,1251.4063,1157.5,1247.4063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1155.5" x2="1305.5" y1="1247.4063" y2="1247.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="1167.5" y="1242.3403">engine.connect()</text><polygon fill="#A80036" points="1294.5,1272.5391,1304.5,1276.5391,1294.5,1280.5391,1298.5,1276.5391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1150.5" x2="1300.5" y1="1276.5391" y2="1276.5391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="1157.5" y="1271.4731">returns a connection</text><polygon fill="#A80036" points="1424.5,1301.6719,1434.5,1305.6719,1424.5,1309.6719,1428.5,1305.6719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1316.5" x2="1430.5" y1="1305.6719" y2="1305.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="1323.5" y="1300.606">create roles</text><polygon fill="#A80036" points="1424.5,1330.8047,1434.5,1334.8047,1424.5,1338.8047,1428.5,1334.8047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1316.5" x2="1430.5" y1="1334.8047" y2="1334.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="1323.5" y="1329.7388">create schema</text><polygon fill="#A80036" points="1424.5,1359.9375,1434.5,1363.9375,1424.5,1367.9375,1428.5,1363.9375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1316.5" x2="1430.5" y1="1363.9375" y2="1363.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="1323.5" y="1358.8716">create types</text><polygon fill="#A80036" points="1424.5,1389.0703,1434.5,1393.0703,1424.5,1397.0703,1428.5,1393.0703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1316.5" x2="1430.5" y1="1393.0703" y2="1393.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="1323.5" y="1388.0044">create tables</text><polygon fill="#A80036" points="1424.5,1418.2031,1434.5,1422.2031,1424.5,1426.2031,1428.5,1422.2031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1316.5" x2="1430.5" y1="1422.2031" y2="1422.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="1323.5" y="1417.1372">create grants</text><polygon fill="#A80036" points="509.5,1447.3359,499.5,1451.3359,509.5,1455.3359,505.5,1451.3359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="503.5" x2="1310.5" y1="1451.3359" y2="1451.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="515.5" y="1446.27">True if schema was initialised</text><rect fill="#EEEEEE" filter="url(#f1urdgrq93cu81)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1463.5" x="3" y="1479.9023"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1466.5" y1="1479.9023" y2="1479.9023"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1466.5" y1="1482.9023" y2="1482.9023"/><rect fill="#EEEEEE" filter="url(#f1urdgrq93cu81)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="299" x="585.25" y="1469.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="280" x="591.25" y="1485.4028">Initialise the Database Using an Index</text><!--
@startuml
title Initialise Database
participant Test
participant Index
participant PostgresDb
participant PostgresDbAPI


note over Index: Entry point is ""connect()""\nin ""index/_api.py""
note over PostgresDb: In ""postgres/_connections.py"""
note over PostgresDbAPI: In ""postgres/_api.py"""
note over PostgresDbInTransaction,PostgresDbConnection: In ""postgres/_connections.py"""

== Create the Database Connection ==

Test -> Index: index_connect()
create PostgresDb
Index -> PostgresDb: from_config()
activate PostgresDb
    PostgresDb -> PostgresDb: create()
    activate PostgresDb

        PostgresDb -> PostgresDb: _create_engine()
        activate PostgresDb

            PostgresDb -> SQLAlchemy: create_engine()
            SQLAlchemy - -> PostgresDb: returns an engine

        deactivate PostgresDb
    deactivate PostgresDb

    PostgresDb - -> Index: database ready for use
deactivate PostgresDb
activate Index

    Index - -> Test: here, have an Index
deactivate Index

== Use the Database Connection ==

note over Test: Using begin() starts a transaction
Test -> PostgresDb: begin()
activate PostgresDb
    PostgresDb -> PostgresDbInTransaction: _enter__()
    PostgresDbInTransaction -> PostgresDbAPI: Construct
    PostgresDbAPI - -> PostgresDbInTransaction: self
    PostgresDbInTransaction - -> PostgresDb: return PostgresDbAPI

    PostgresDb - -> Test: a PostgresDbAPI

deactivate PostgresDb


note over Test: Using connect() does **NOT** start a transaction
Test -> PostgresDb: connect()
activate PostgresDb
    PostgresDb -> PostgresDbConnection: _enter__()
    PostgresDbConnection -> PostgresDbAPI: Construct
    PostgresDbAPI - -> PostgresDbConnection: self
    PostgresDbConnection - -> PostgresDb: return PostgresDbAPI

    PostgresDb - -> Test: a PostgresDbAPI

deactivate PostgresDb

== Create an Index using the Connection ==

Test -> Index: dunder_init()

Test -> Index: init_db()
activate Index
    Index -> PostgresDb: init()
    activate PostgresDb
        PostgresDb -> _core: ensure_db(self._engine)
        activate _core
            _core -> SQLAlchemy: engine.connect()
            SQLAlchemy - -> _core: returns a connection
            database Server
            _core -> Server: create roles
            _core -> Server: create schema
            _core -> Server: create types
            _core -> Server: create tables
            _core -> Server: create grants

            _core - -> PostgresDb: True if schema was initialised
        
        deactivate _core

    deactivate PostgresDb
deactivate Index


== Initialise the Database Using an Index ==




@enduml

PlantUML version 1.2018.13(Tue Nov 27 04:11:51 AEDT 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.7+10-post-Ubuntu-3ubuntu1
Operating System: Linux
OS Version: 5.4.0-1012-azure
Default Encoding: UTF-8
Language: en
Country: AU
--></g></svg>
