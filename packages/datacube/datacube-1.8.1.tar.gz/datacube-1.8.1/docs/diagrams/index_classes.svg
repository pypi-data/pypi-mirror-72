<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="526px" preserveAspectRatio="none" style="width:528px;height:526px;" version="1.1" viewBox="0 0 528 526" width="528px" zoomAndPan="magnify"><defs><filter height="300%" id="f17pymal95uwx2" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--class PostgresDB--><rect fill="#FEFECE" filter="url(#f17pymal95uwx2)" height="176.0469" id="PostgresDB" style="stroke: #A80036; stroke-width: 1.5;" width="196" x="162.5" y="8"/><ellipse cx="219.75" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M222.7188,29.6406 Q222.1406,29.9375 221.5,30.0781 Q220.8594,30.2344 220.1563,30.2344 Q217.6563,30.2344 216.3281,28.5938 Q215.0156,26.9375 215.0156,23.8125 Q215.0156,20.6875 216.3281,19.0313 Q217.6563,17.375 220.1563,17.375 Q220.8594,17.375 221.5,17.5313 Q222.1563,17.6875 222.7188,17.9844 L222.7188,20.7031 Q222.0938,20.125 221.5,19.8594 Q220.9063,19.5781 220.2813,19.5781 Q218.9375,19.5781 218.25,20.6563 Q217.5625,21.7188 217.5625,23.8125 Q217.5625,25.9063 218.25,26.9844 Q218.9375,28.0469 220.2813,28.0469 Q220.9063,28.0469 221.5,27.7813 Q222.0938,27.5 222.7188,26.9219 L222.7188,29.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="73" x="240.25" y="28.1543">PostgresDB</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="163.5" x2="357.5" y1="40" y2="40"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="170.5" y="48.9023"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="44" x="182.5" y="54.2104">_engine</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="170.5" y="61.707"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="67" x="182.5" y="67.0151">_connection</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="163.5" x2="357.5" y1="73.6094" y2="73.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="164" x="168.5" y="87.8198">@classmethod from_config()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="133" x="168.5" y="100.6245">@classmethod create()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="184" x="168.5" y="113.4292">@staticmethod _create_engine()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="38" x="168.5" y="126.2339">close()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="25" x="168.5" y="139.0386">init()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="168.5" y="151.8433">connect()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="39" x="168.5" y="164.6479">begin()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="112" x="168.5" y="177.4526">get_dataset_fields()</text><!--class PostgresDbAPI--><rect fill="#FEFECE" filter="url(#f17pymal95uwx2)" height="112.0234" id="PostgresDbAPI" style="stroke: #A80036; stroke-width: 1.5;" width="178" x="171.5" y="403"/><ellipse cx="210.8" cy="419" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M213.7688,424.6406 Q213.1906,424.9375 212.55,425.0781 Q211.9094,425.2344 211.2063,425.2344 Q208.7063,425.2344 207.3781,423.5938 Q206.0656,421.9375 206.0656,418.8125 Q206.0656,415.6875 207.3781,414.0313 Q208.7063,412.375 211.2063,412.375 Q211.9094,412.375 212.55,412.5313 Q213.2063,412.6875 213.7688,412.9844 L213.7688,415.7031 Q213.1438,415.125 212.55,414.8594 Q211.9563,414.5781 211.3313,414.5781 Q209.9875,414.5781 209.3,415.6563 Q208.6125,416.7188 208.6125,418.8125 Q208.6125,420.9063 209.3,421.9844 Q209.9875,423.0469 211.3313,423.0469 Q211.9563,423.0469 212.55,422.7813 Q213.1438,422.5 213.7688,421.9219 L213.7688,424.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="92" x="230.2" y="423.1543">PostgresDbAPI</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="172.5" x2="348.5" y1="435" y2="435"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="179.5" y="443.9023"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="71" x="191.5" y="449.2104">_connection:</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="172.5" x2="348.5" y1="455.8047" y2="455.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="177.5" y="470.0151">rollback()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="177.5" y="482.8198">execute()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="177.5" y="495.6245">insert_dataset()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="166" x="177.5" y="508.4292">... Lots of dataset functions()</text><!--class PostgresDbConnection--><rect fill="#FEFECE" filter="url(#f17pymal95uwx2)" height="99.2188" id="PostgresDbConnection" style="stroke: #A80036; stroke-width: 1.5;" width="176" x="63.5" y="244"/><ellipse cx="78.5" cy="260" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M81.4688,265.6406 Q80.8906,265.9375 80.25,266.0781 Q79.6094,266.2344 78.9063,266.2344 Q76.4063,266.2344 75.0781,264.5938 Q73.7656,262.9375 73.7656,259.8125 Q73.7656,256.6875 75.0781,255.0313 Q76.4063,253.375 78.9063,253.375 Q79.6094,253.375 80.25,253.5313 Q80.9063,253.6875 81.4688,253.9844 L81.4688,256.7031 Q80.8438,256.125 80.25,255.8594 Q79.6563,255.5781 79.0313,255.5781 Q77.6875,255.5781 77,256.6563 Q76.3125,257.7188 76.3125,259.8125 Q76.3125,261.9063 77,262.9844 Q77.6875,264.0469 79.0313,264.0469 Q79.6563,264.0469 80.25,263.7813 Q80.8438,263.5 81.4688,262.9219 L81.4688,265.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="144" x="92.5" y="264.1543">PostgresDbConnection</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="64.5" x2="238.5" y1="276" y2="276"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="71.5" y="284.9023"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="38" x="83.5" y="290.2104">engine</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="71.5" y="297.707"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="61" x="83.5" y="303.0151">connection</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="64.5" x2="238.5" y1="309.6094" y2="309.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="62" x="69.5" y="323.8198">__enter__()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="69.5" y="336.6245">__exit__()</text><!--class PostgresDbInTransaction--><rect fill="#FEFECE" filter="url(#f17pymal95uwx2)" height="99.2188" id="PostgresDbInTransaction" style="stroke: #A80036; stroke-width: 1.5;" width="190" x="274.5" y="244"/><ellipse cx="289.5" cy="260" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M292.4688,265.6406 Q291.8906,265.9375 291.25,266.0781 Q290.6094,266.2344 289.9063,266.2344 Q287.4063,266.2344 286.0781,264.5938 Q284.7656,262.9375 284.7656,259.8125 Q284.7656,256.6875 286.0781,255.0313 Q287.4063,253.375 289.9063,253.375 Q290.6094,253.375 291.25,253.5313 Q291.9063,253.6875 292.4688,253.9844 L292.4688,256.7031 Q291.8438,256.125 291.25,255.8594 Q290.6563,255.5781 290.0313,255.5781 Q288.6875,255.5781 288,256.6563 Q287.3125,257.7188 287.3125,259.8125 Q287.3125,261.9063 288,262.9844 Q288.6875,264.0469 290.0313,264.0469 Q290.6563,264.0469 291.25,263.7813 Q291.8438,263.5 292.4688,262.9219 L292.4688,265.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="158" x="303.5" y="264.1543">PostgresDbInTransaction</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="275.5" x2="463.5" y1="276" y2="276"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="282.5" y="284.9023"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="38" x="294.5" y="290.2104">engine</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="282.5" y="297.707"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="61" x="294.5" y="303.0151">connection</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="275.5" x2="463.5" y1="309.6094" y2="309.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="62" x="280.5" y="323.8198">__enter__()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="280.5" y="336.6245">__exit__()</text><!--class Index--><rect fill="#FEFECE" filter="url(#f17pymal95uwx2)" height="176.0469" id="Index" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="6" y="8"/><ellipse cx="46.2" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M49.1688,29.6406 Q48.5906,29.9375 47.95,30.0781 Q47.3094,30.2344 46.6063,30.2344 Q44.1063,30.2344 42.7781,28.5938 Q41.4656,26.9375 41.4656,23.8125 Q41.4656,20.6875 42.7781,19.0313 Q44.1063,17.375 46.6063,17.375 Q47.3094,17.375 47.95,17.5313 Q48.6063,17.6875 49.1688,17.9844 L49.1688,20.7031 Q48.5438,20.125 47.95,19.8594 Q47.3563,19.5781 46.7313,19.5781 Q45.3875,19.5781 44.7,20.6563 Q44.0125,21.7188 44.0125,23.8125 Q44.0125,25.9063 44.7,26.9844 Q45.3875,28.0469 46.7313,28.0469 Q47.3563,28.0469 47.95,27.7813 Q48.5438,27.5 49.1688,26.9219 L49.1688,29.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="33" x="65.8" y="28.1543">Index</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="126" y1="40" y2="40"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="48.9023"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="95" x="26" y="54.2104">_db: PostgresDB</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="33" x="26" y="67.0151">users</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="91" x="26" y="79.8198">metadata_types</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="50" x="26" y="92.6245">products</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="50" x="26" y="105.4292">datasets</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="15" x="26" y="118.2339">uri</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="126" y1="124.8281" y2="124.8281"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="12" y="139.0386">init_db()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="38" x="12" y="151.8433">close()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="62" x="12" y="164.6479">__enter__()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="12" y="177.4526">__exit__()</text><!--class Engine--><rect fill="#FEFECE" filter="url(#f17pymal95uwx2)" height="86.4141" id="Engine" style="stroke: #A80036; stroke-width: 1.5;" width="124" x="393.5" y="53"/><ellipse cx="430.55" cy="69" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M433.5188,74.6406 Q432.9406,74.9375 432.3,75.0781 Q431.6594,75.2344 430.9563,75.2344 Q428.4563,75.2344 427.1281,73.5938 Q425.8156,71.9375 425.8156,68.8125 Q425.8156,65.6875 427.1281,64.0313 Q428.4563,62.375 430.9563,62.375 Q431.6594,62.375 432.3,62.5313 Q432.9563,62.6875 433.5188,62.9844 L433.5188,65.7031 Q432.8938,65.125 432.3,64.8594 Q431.7063,64.5781 431.0813,64.5781 Q429.7375,64.5781 429.05,65.6563 Q428.3625,66.7188 428.3625,68.8125 Q428.3625,70.9063 429.05,71.9844 Q429.7375,73.0469 431.0813,73.0469 Q431.7063,73.0469 432.3,72.7813 Q432.8938,72.5 433.5188,71.9219 L433.5188,74.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="43" x="449.45" y="73.1543">Engine</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="394.5" x2="516.5" y1="85" y2="85"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="112" x="399.5" y="99.2104">Part of SQLAlchemy</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="394.5" x2="516.5" y1="105.8047" y2="105.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="399.5" y="120.0151">connect()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="399.5" y="132.8198">execute()</text><!--link Index to PostgresDB--><path d="M140.31,96 C147.64,96 154.97,96 162.29,96 " fill="none" id="Index-PostgresDB" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="127.12,96,133.1244,99.9934,139.12,95.9868,133.1156,91.9934,127.12,96" style="stroke: #A80036; stroke-width: 1.0;"/><!--link PostgresDB to PostgresDbConnection--><path d="M205.46,195.73 C196.14,212.44 186.84,229.12 178.65,243.8 " fill="none" id="PostgresDB-PostgresDbConnection" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="211.9,184.17,205.4853,187.4642,206.0589,194.6524,212.4736,191.3583,211.9,184.17" style="stroke: #A80036; stroke-width: 1.0;"/><!--link PostgresDB to PostgresDbInTransaction--><path d="M315.54,195.73 C324.86,212.44 334.16,229.12 342.35,243.8 " fill="none" id="PostgresDB-PostgresDbInTransaction" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="309.1,184.17,308.5264,191.3583,314.9411,194.6524,315.5147,187.4642,309.1,184.17" style="stroke: #A80036; stroke-width: 1.0;"/><!--link PostgresDbConnection to PostgresDbAPI--><path d="M191.14,353.97 C201.82,369.98 213.32,387.22 223.82,402.98 " fill="none" id="PostgresDbConnection-PostgresDbAPI" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="183.91,343.11,183.9012,350.3211,190.5542,353.1027,190.563,345.8916,183.91,343.11" style="stroke: #A80036; stroke-width: 1.0;"/><!--link PostgresDbInTransaction to PostgresDbAPI--><path d="M329.86,353.97 C319.18,369.98 307.68,387.22 297.18,402.98 " fill="none" id="PostgresDbInTransaction-PostgresDbAPI" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="337.09,343.11,330.437,345.8916,330.4458,353.1027,337.0988,350.3211,337.09,343.11" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml

class PostgresDB {
  - _engine
  - _connection
  @classmethod from_config()
  @classmethod create()
  @staticmethod _create_engine()
  close()
  init()
  connect()
  begin()
  get_dataset_fields()
}

class PostgresDbAPI {
  - _connection: 
  rollback()
  execute()
  insert_dataset()
  ... Lots of dataset functions()

}

class PostgresDbConnection {
  - engine
  - connection
  __enter__()
  __exit__()
}
class PostgresDbInTransaction {
  - engine
  - connection
  __enter__()
  __exit__()
}

class Index {
  - _db: PostgresDB
  users
  metadata_types
  products
  datasets
  uri
  init_db()
  close()
  __enter__()
  __exit__()

}

class Engine {
  Part of SQLAlchemy
  connect()
  execute()
}

Index *- PostgresDB

PostgresDB o- PostgresDbConnection
PostgresDB o- - PostgresDbInTransaction

PostgresDbConnection o- PostgresDbAPI
PostgresDbInTransaction o- - PostgresDbAPI



@enduml

PlantUML version 1.2018.13(Tue Nov 27 04:11:51 AEDT 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.7+10-post-Ubuntu-3ubuntu1
Operating System: Linux
OS Version: 5.4.0-1012-azure
Default Encoding: UTF-8
Language: en
Country: AU
--></g></svg>
